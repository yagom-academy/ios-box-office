# ğŸ¥ ë°•ìŠ¤ì˜¤í”¼ìŠ¤ ğŸ¿

## ğŸ“– ëª©ì°¨

1. [ğŸ“¢ ì†Œê°œ](#1.)
2. [ğŸ‘¤ íŒ€ì›](#2.)
3. [â±ï¸ íƒ€ì„ë¼ì¸](#3.)
4. [ğŸ“Š UML & íŒŒì¼íŠ¸ë¦¬](#4.)
5. [ğŸ“± ì‹¤í–‰ í™”ë©´](#5.)
6. [ğŸ§¨ íŠ¸ëŸ¬ë¸” ìŠˆíŒ…](#6.)
7. [ğŸ”— ì°¸ê³  ë§í¬](#7.)

<br>

<a id="1."></a>

## 1. ğŸ“¢ ì†Œê°œ
`ì¼ë³„ ë°•ìŠ¤ì˜¤í”¼ìŠ¤ API`ë¥¼ ì´ìš©í•´ì„œ ë°•ìŠ¤ì˜¤í”¼ìŠ¤ ì •ë³´ë¥¼ ë°›ì•„ì˜¤ê³  ì›í•˜ëŠ” ì˜í™”ì˜ ì •ë³´ë¥¼ ë³´ì—¬ë“œë¦½ë‹ˆë‹¤!

> **í•µì‹¬ ê°œë… ë° ê²½í—˜**
> 
> - **Networking**
>   - `URLSession`ì„ ì´ìš©í•œ ë„¤íŠ¸ì›Œí‚¹
> - **TestDouble**
>   - `TestDouble` ê°ì²´ë¥¼ ì´ìš©í•˜ì—¬ ë„¤íŠ¸ì›Œí¬ê°€ ì—°ê²°ë˜ì–´ ìˆì§€ ì•Šì€ ê²½ìš°ì—ë„ í…ŒìŠ¤íŠ¸
> - **DTO**
>   - `JSON` ë°ì´í„°ë¥¼ ë””ì½”ë”©í•  `DTO` ê°ì²´ êµ¬í˜„
>     - ì‚¬ìš©í•  ë°ì´í„°ë§Œìœ¼ë¡œ ì´ë£¨ì–´ì§„ `Entity` ê°ì²´ êµ¬í˜„
> - **CollectionView**
>   - `CollectionView`ë¥¼ í™œìš©í•œ UIêµ¬í˜„
>   - `CompositionalLayout`ë¥¼ í™œìš©í•œ `Layout` ì„¤ì •
>   - `DiffableDataSource`ë¥¼ í™œìš©í•œ UI ì—…ë°ì´íŠ¸
> - **MVC**
>   - `MVC`íŒ¨í„´ì„ í™œìš©í•˜ì—¬ ê°ì²´ë¥¼ ì—­í• ì— ì•Œë§ê²Œ ë¶„ë¦¬í•˜ì—¬ í”„ë¡œì íŠ¸ êµ¬í˜„
> - **NSCache**
>   - `NSCache`ë¥¼ í™œìš©í•˜ì—¬ ë°›ì•„ì˜¨ ì´ë¯¸ì§€ë¥¼ ì¬ì‚¬ìš©
> - **UICalendarView**
>   - `UICalendarView`ë¥¼ í™œìš©í•˜ì—¬ ë‹¬ë ¥ êµ¬í˜„

<br>

<a id="2."></a>

## 2. ğŸ‘¤ íŒ€ì›

| [kyungmin ğŸ¼](https://github.com/YaRkyungmin) | [Erick ğŸ¶](https://github.com/h-suo) |
| :--------: | :--------: | 
| <Img src = "https://cdn.discordapp.com/attachments/1100965172086046891/1108927085713563708/admin.jpeg" width="350"/>| <Img src = "https://user-images.githubusercontent.com/109963294/235300758-fe15d3c5-e312-41dd-a9dd-d61e0ab354cf.png" width="350"/>|

<br>

<a id="3."></a>
## 3. â±ï¸ íƒ€ì„ë¼ì¸

> í”„ë¡œì íŠ¸ ê¸°ê°„ :  2023.07.24 ~ 2023.08.04

|ë‚ ì§œ|ë‚´ìš©|
|:---:|---|
| **2023.07.24** |â–«ï¸ `JSON` ë°ì´í„°ë¥¼ ë””ì½”ë”©í•  `Entity` ê°ì²´ êµ¬í˜„ <br>|
| **2023.07.25** |â–«ï¸ ì½”ë“œ ê°œì„ ì„ ìœ„í•œ ë¦¬í™í† ë§ <br> |
| **2023.07.26** |â–«ï¸ ë„¤íŠ¸ì›Œí‚¹ ì‘ì—…ì„ í•  `NetworkManager` êµ¬í˜„ <br>|
| **2023.07.27** |â–«ï¸ `TestDouble`ì„ ì´ìš©í•œ í…ŒìŠ¤íŠ¸ ìƒì„± <br> |
| **2023.07.28** |â–«ï¸ ì½”ë“œ ê°œì„ ì„ ìœ„í•œ ë¦¬í™í† ë§ <br> â–«ï¸ README ì‘ì„± <br>|
| **2023.07.31** |â–«ï¸ `CollectionViewCell` êµ¬í˜„ <br>|
| **2023.08.01** |â–«ï¸ `CollectionView`ë¡œ UI êµ¬í˜„ <br> â–«ï¸ `BoxOffice`ì˜ ë°ì´í„°ë¥¼ ê°€ì ¸ì™€ ê´€ë¦¬í•˜ëŠ” `BoxOfficeManager`êµ¬í˜„ <br> â–«ï¸ ì‹¤ì œ ì‚¬ìš©í•  ë°ì´í„°ë§Œìœ¼ë¡œ ì´ë£¨ì–´ì§„ `Entity` ê°ì²´ `DailyBoxOffice` êµ¬í˜„ <br> â–«ï¸ `refreshControl`ì„ ì´ìš©í•œ ë°ì´í„° ë¦¬ë¡œë“œ ë¡œì§ êµ¬í˜„ <br>|
| **2023.08.02** |â–«ï¸ ë°ì´í„° ë¡œë“œì— ì‹¤íŒ¨í–ˆì„ ë•Œ `Alert`ê°€ ëœ¨ë„ë¡ êµ¬í˜„ <br>|
| **2023.08.03** |â–«ï¸ ì½”ë“œ ê°œì„ ì„ ìœ„í•œ ë¦¬í™í† ë§ <br> |
| **2023.08.04** |â–«ï¸ ì½”ë“œ ê°œì„ ì„ ìœ„í•œ ë¦¬í™í† ë§ <br> â–«ï¸ README ì‘ì„± <br>|
| **2023.08.05** |â–«ï¸ `MoiveDetailView` ë° `Controller` êµ¬í˜„ <br> â–«ï¸`BoxOfficeManager`ì— `fetchPosterImage`ì¶”ê°€ <br>|
| **2023.08.08** |â–«ï¸ ì´ë¯¸ì§€ ìºì‹±ì„ ìœ„í•œ `CacheManager` êµ¬í˜„ <br> â–«ï¸ `CalendarView`ë° `Controller` êµ¬í˜„ <br>|
| **2023.08.09** |â–«ï¸ ì½”ë“œ ê°œì„ ì„ ìœ„í•œ ë¦¬í™í† ë§ <br> |
| **2023.08.11** |â–«ï¸ ì½”ë“œ ê°œì„ ì„ ìœ„í•œ ë¦¬í™í† ë§ <br> â–«ï¸ README ì‘ì„± <br>|

<br>

<a id="4."></a>
## 4. ğŸ“Š UML & íŒŒì¼íŠ¸ë¦¬

### UML

<Img src = "https://hackmd.io/_uploads/BypKlumh3.png" width=""/>

<br>

### íŒŒì¼íŠ¸ë¦¬
```
BoxOffice
â”œâ”€â”€ App
â”‚Â Â  â”œâ”€â”€ AppDelegate.swift
â”‚Â Â  â””â”€â”€ SceneDelegate.swift
â”œâ”€â”€ Model
â”‚Â Â  â”œâ”€â”€ DTO
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ BoxOffice.swift
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ Movie.swift
â”‚Â Â  â”‚Â Â  â””â”€â”€ PosterImageInformation.swift
â”‚Â Â  â”œâ”€â”€ DailyBoxOffice.swift
â”‚Â Â  â”œâ”€â”€ Manager
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ BoxOfficeManager.swift
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ CacheManager.swift
â”‚Â Â  â”‚Â Â  â””â”€â”€ DataManager.swift
â”‚Â Â  â”œâ”€â”€ MovieInformation.swift
â”‚Â Â  â””â”€â”€ TestDouble
â”‚Â Â      â”œâ”€â”€ StubURLSession.swift
â”‚Â Â      â””â”€â”€ URLSessionProtocol.swift
â”œâ”€â”€ Controller
â”‚Â Â  â”œâ”€â”€ BoxOfficeViewController.swift
â”‚Â Â  â””â”€â”€ CalendarViewController.swift
â”œâ”€â”€ View
â”‚   â”œâ”€â”€ BoxOfficeCollectionViewCell.swift
â”‚   â”œâ”€â”€ MovieDetailScrollView.swift
â”‚   â””â”€â”€ MovieDetailViewController.swift
â”œâ”€â”€ Extension
â”‚Â Â  â”œâ”€â”€ Date+.swift
â”‚Â Â  â”œâ”€â”€ DateFormatter+.swift
â”‚Â Â  â”œâ”€â”€ NumberFormatter+.swift
â”‚Â Â  â”œâ”€â”€ UIAlertController+.swift
â”‚Â Â  â”œâ”€â”€ UILabel+.swift
â”‚Â Â  â”œâ”€â”€ URL+.swift
â”‚Â Â  â”œâ”€â”€ URLRequest+.swift
â”‚Â Â  â””â”€â”€ URLSession+.swift
â”œâ”€â”€ Error
â”‚Â Â  â”œâ”€â”€ DataError.swift
â”‚Â Â  â””â”€â”€ NetworkError.swift
â”œâ”€â”€ NetWork
â”‚Â Â  â””â”€â”€ NetworkManager.swift
â””â”€â”€ Util
 Â Â  â””â”€â”€ Path.swift
```

<br>

<a id="5."></a>
## 5. ğŸ“± ì‹¤í–‰ í™”ë©´
| ë°•ìŠ¤ì˜¤í”¼ìŠ¤ ë°ì´í„° ë¡œë“œ | í™”ë©´ì„ ë‹¹ê²¨ ë°ì´í„° ë¦¬ë¡œë“œ | ë°ì´í„° ë¡œë“œì— ì‹¤íŒ¨í–ˆì„ ë•Œ ì•Œë¦¼í™”ë©´ |
| :--------------: | :-------: |  :-------: | 
| <Img src = "https://hackmd.io/_uploads/BJdHyz9i3.gif" width="225"/> | <Img src = "https://hackmd.io/_uploads/ByZ1xfqi2.gif" width="225"/>  | <Img src = "https://hackmd.io/_uploads/H12xlf5jn.gif" width="225"/> |
| **ì˜í™” ìƒì„¸í™”ë©´** | **ë‚ ì§œì„ íƒ** |
| <Img src = "https://hackmd.io/_uploads/HJd7lDQ2n.gif" width="225"/> | <Img src = "https://hackmd.io/_uploads/r1FOxvQ3n.gif" width="225"/>  |

<br>

<a id="6."></a>
## 6. ğŸ§¨ íŠ¸ëŸ¬ë¸” ìŠˆíŒ…

### [ğŸ“ Step3 íŠ¸ëŸ¬ë¸” ìŠˆíŒ… ë³´ëŸ¬ê°€ê¸°](https://github.com/h-suo/ios-box-office/blob/step3/README.md#6--íŠ¸ëŸ¬ë¸”-ìŠˆíŒ…)

<br>

### 1ï¸âƒ£ VCì˜ ê¸°ëŠ¥ ë¶„ë¦¬

#### ğŸ”¥ ë¬¸ì œì 
ë§ì€ ê¸°ëŠ¥ë“¤ì„ êµ¬í˜„í•˜ë‹¤ ë³´ë‹ˆ `Model`ìª½ìœ¼ë¡œ ê¸°ëŠ¥ ë¶„ë¦¬ë¥¼ ë§ì´ í–ˆìŒì—ë„ ë¶ˆêµ¬í•˜ê³  `VC`ì˜ ì½”ë“œê°€ ê¸¸ì–´ì ¸ ê°€ë…ì„±ì´ ë–¨ì–´ì§€ëŠ” ë¬¸ì œê°€ ìˆì—ˆìŠµë‹ˆë‹¤.

#### ğŸ§¯ í•´ê²°ë°©ë²•
`extension`ê³¼ `MARK`ë¥¼ ì´ìš©í•´ ê¸°ëŠ¥ ë¶„ë¦¬ë¥¼ í•´ì„œ ì½”ë“œì˜ ê°€ë…ì„±ì„ ë†’ì˜€ìŠµë‹ˆë‹¤.

>#### ğŸ”ºextension í•˜ì§€ ì•Šì€ ë¶€ë¶„
>- stored property
>- initializer
>- viewDidLoad
>#### ğŸ”ºextension-setupComponents
>- componentê´€ë ¨ ì„¸íŒ…
>#### ğŸ”ºextension-configureUI
>- ê°ê°ì˜ UIê°ì²´ì˜ addSubview
>#### ğŸ”ºextension-setupConstraint
>- ê°ê°ì˜ UIê°ì²´ì˜ constraint
>#### ğŸ”ºextension-buttonAction
>- ë²„íŠ¼ ë©”ì„œë“œ
>#### ğŸ”ºê·¸ ì™¸ ê¸°ëŠ¥
>- ë¸ë¦¬ê²Œì´íŠ¸, ë°ì´í„°ì†ŒìŠ¤ ë“±..

<br>

### 2ï¸âƒ£ Hashable

#### ğŸ”¥ ë¬¸ì œì 
ê¸°ì¡´ì˜ `CollectionView`ì— `CompositionalLayout`ì™€ `DiffableDataSource`ë¥¼ ì ìš©í•˜ëŠ” ê³¼ì •ì—ì„œ `DailyBoxOffice` ê°ì²´ê°€ `Hashable`ì„ ì±„íƒí•´ì•¼ í–ˆìŠµë‹ˆë‹¤.
ê·¸ë¦¬ê³  `Hashalbe`ì„ ì±„íƒí•  ë•Œ `struct`ì˜ ëª¨ë“  í”„ë¡œí¼í‹°ëŠ” `Hashable`ì„ ì¤€ìˆ˜í•´ì•¼ í•œë‹¤ê³  ë‚˜ì™€ìˆì—ˆì§€ë§Œ `rankStateColor`ëŠ” `typealias` íƒ€ì…ì´ë¼ `Hashable`ì„ ì¤€ìˆ˜í•˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.
> For a struct, all its stored properties must conform to Hashable.

#### ğŸ§¯ í•´ê²°ë°©ë²•
`rankStateColor`ëŠ” `rankState property`ë¥¼ í†µí•´ì„œ ë§Œë“¤ì–´ì§€ëŠ” `property`ì´ê¸° ë•Œë¬¸ì—
`hash value`ë¥¼ ë¹„êµí• ë•Œ í•„ìš”í•˜ì§€ ì•ŠëŠ” ê°’ì´ë¼ê³  ìƒê°í•´ì„œ `hash`í•¨ìˆ˜ì—ì„œ ë¹¼ì¤¬ìŠµë‹ˆë‹¤.

```swift
typealias RankStateColor = (targetString: String, color: UIColor)

struct DailyBoxOffice: Hashable {
    let movieCode: String
    let rank: String
    let rankState: String
    let movieTitle: String
    let dailyAndTotalAudience: String
    let rankStateColor: RankStateColor
    
    static func == (lhs: DailyBoxOffice, rhs: DailyBoxOffice) -> Bool {
        return lhs.movieCode == rhs.movieCode
            && lhs.rank == rhs.rank
            && lhs.rankState == rhs.rankState
            && lhs.movieTitle == rhs.movieTitle
            && lhs.dailyAndTotalAudience == rhs.dailyAndTotalAudience
    }
    
    func hash(into hasher: inout Hasher) {
        hasher.combine(movieCode)
        hasher.combine(rank)
        hasher.combine(rankState)
        hasher.combine(movieTitle)
        hasher.combine(dailyAndTotalAudience)
    }
}
```

### 3ï¸âƒ£ URLRequest

#### ğŸ”¥ ë¬¸ì œì 
ì˜í™” í¬ìŠ¤í„° ì´ë¯¸ì§€ë¥¼ ê°€ì ¸ì˜¬ ë•Œ [ë‹¤ìŒ ì´ë¯¸ì§€ ê²€ìƒ‰ API](https://developers.kakao.com/docs/latest/ko/daum-search/dev-guide#search-image) ì´ìš©í•´ì•¼ í–ˆìŠµë‹ˆë‹¤.
ê¸°ì¡´ `API`ëŠ” `URLRequest`ë¥¼ ì„¤ì •í•  í•„ìš” ì—†ì´ `URL`ì˜ `QureyItem`ë§Œì„ ì„¤ì •í•˜ì—¬ ë°ì´í„°ë¥¼ ìš”ì²­í•  ìˆ˜ ìˆì—ˆì§€ë§Œ `ë‹¤ìŒ ì´ë¯¸ì§€ ê²€ìƒ‰ API`ëŠ” `Request Header`ì— `Key`ë¥¼ ë‹´ì•„ì„œ ë³´ë‚´ì•¼ í–ˆìŠµë‹ˆë‹¤.

#### ğŸ§¯ í•´ê²°ë°©ë²•
`NetworkManager`ì— `URLRequest`ë¥¼ ë°›ì„ ìˆ˜ ìˆë„ë¡ `requestData(from urlRequest:, completion:)` ë©”ì„œë“œë¥¼ ì¶”ê°€í•˜ì˜€ìŠµë‹ˆë‹¤.

```swift
func requestData(from urlRequest: URLRequest, completion: @escaping (Result<Data, NetworkError>) -> Void) {
    let task = urlSession.dataTask(with: urlRequest) { data, response, error in
        // ...
    }
    // ...
}
```

### 4ï¸âƒ£ NSCache

#### ğŸ”¥ ë¬¸ì œì 
ë°ì´í„°ê°€ í° ì´ë¯¸ì§€ë¥¼ ê³„ì†í•´ì„œ ë„¤íŠ¸ì›Œí‚¹ì„ í†µí•´ ë°›ì•„ì˜¤ëŠ” ê²ƒì€ íš¨ìœ¨ì ì´ì§€ ëª»í•˜ë‹¤ê³  ìƒê°í•˜ì˜€ìŠµë‹ˆë‹¤.

```swift
func fetchPosterImage(_ movieName: String, completion: @escaping (Bool) -> Void) {
        
        // ...
        networkManager.requestData(from: urlRequest) { [weak self] result in
            
            // ...
            }
        }
    }
```
- `fetchPosterImage`ë¥¼ í˜¸ì¶œí•˜ë©´ ë¬´ì¡°ê±´ `requestData`ë¡œ ë„¤íŠ¸ì›Œí‚¹ì„ í•˜ì—¬ ì´ë¯¸ì§€ë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤.

#### ğŸ§¯ í•´ê²°ë°©ë²•
ë°ì´í„°ê°€ í° ì´ë¯¸ì§€ëŠ” í•œë²ˆ ë°›ì•„ì˜¨ í›„ ì¬ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ `CacheManager`ë¥¼ ë§Œë“¤ì–´ ê´€ë¦¬í•´ì£¼ì—ˆìŠµë‹ˆë‹¤.

```swift
final class CacheManager {
    static let shared = CacheManager()
    private let imageCache = NSCache<NSString, UIImage>()
    
    private init() {}
    
    
    func setCacheImage(_ image: UIImage, forKey: String) {
        imageCache.setObject(image, forKey: forKey as NSString)
    }
    
    func cacheImage(forKey: String) -> UIImage? {
        return imageCache.object(forKey: forKey as NSString)
    }
}
```
- `NSString`ì„ í‚¤ê°’ìœ¼ë¡œ `UIImage`ë¥¼ ì €ì¥í•˜ëŠ” `NSCache`ë¥¼ ì‹±ê¸€í†¤ íŒ¨í„´ì„ ì´ìš©í•˜ì—¬ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤.

```swift
func fetchPosterImage(_ movieName: String, completion: @escaping (Bool) -> Void) {
    if let cacheImage = CacheManager.shared.cacheImage(forKey: movieName) {
        posterImage = cacheImage
        completion(true)
        return
    }
    
    // ...
    networkManager.requestData(from: urlRequest) { [weak self] result in
        // ...
        switch result {
        case .success(let data):
            do {
                // ...
                CacheManager.shared.setCacheImage(image, forKey: movieName)
                self.posterImage = image
                completion(true)
            } catch {
                // ...
            }
        case .failure(let error):
            // ...
        }
    }
}
```
- ì‹¤ì œ ìºì‹±ì„ í•˜ëŠ” ìœ„ì¹˜ëŠ” `BoxOfficeManager`ì˜ `fetchPosterImage`ì—ì„œ ì´ë¯¸ì§€ë¥¼ ë°›ì•„ì˜¤ê¸° ì „ì— `movieName`ì„ `cacheKey`ë¡œ ìºì‹±ëœ ì´ë¯¸ì§€ê°€ ìˆë‹¤ë©´ `requestData`ë¥¼ í˜¸ì¶œí•˜ì§€ ì•Šê³  ìºì‹±ëœ ì´ë¯¸ì§€ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.
- ìºì‹±ëœ ì´ë¯¸ì§€ê°€ ì—†ë‹¤ë©´ `requestData`ë¡œ ì´ë¯¸ì§€ë¥¼ ë°›ì•„ì™€ ìºì‹±í•˜ë„ë¡ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤.

### 5ï¸âƒ£ ë‚ ì§œì„ íƒ

#### ğŸ”¥ ë¬¸ì œì 
`UICalendarView`ë¥¼ ì‚¬ìš©í•˜ì—¬ ë‹¬ë ¥ì„ êµ¬í˜„í•˜ì˜€ìŠµë‹ˆë‹¤.
ì´ ë•Œ ì²˜ìŒ ë‹¬ë ¥ì´ ë³´ì˜€ì„ ë•Œ ì„ íƒëœ ë‚ ì§œ ë‹¬ë ¥ì— í‘œì‹œí•˜ê³ , ì‚¬ìš©ìê°€ ì„ íƒí•œ ë‚ ì§œë¥¼ `BoxOfficeViewController`ë¡œ ë³´ë‚´ê¸° ìœ„í•´ ê³ ë¯¼í–ˆìŠµë‹ˆë‹¤.

#### ğŸ§¯ í•´ê²°ë°©ë²•
`BoxOfficeViewContorller`ì—ì„œëŠ” ì„ íƒëœ ë‚ ì§œë¥¼ `init`ì˜ íŒŒë¼ë¯¸í„°ë¡œ ì£¼ì…í•˜ì—¬ ì „ë‹¬í•˜ê³ , `CalendarViewController`ì—ì„œëŠ” `Delegate` íŒ¨í„´ì„ ì‚¬ìš©í•˜ì—¬ ì‚¬ìš©ìê°€ ì„ íƒí•œ ë‚ ì§œë¥¼ `BoxOfficeViewController`ì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ í–ˆìŠµë‹ˆë‹¤.

```swift
private func setupCalendarView() {
    
    // ...
    let dateSelection = UICalendarSelectionSingleDate(delegate: self)
    dateSelection.selectedDate = selectedDate
    calendarView.selectionBehavior = dateSelection
}
```
- `BoxOfficeViewController`ì—ì„œ `init`ì„ í†µí•´ ë°›ì•„ì˜¨ `selectedDate`ë¥¼ ì„ íƒëœ ë‚ ì§œë¡œ ì„ íƒí•˜ë„ë¡ í–ˆìŠµë‹ˆë‹¤.
- `UICalendarSelectionSingleDate`ë¡œ ë‹¨ì¼ ì„ íƒë§Œ ê°€ëŠ¥í•˜ë„ë¡ ì„¤ì •í–ˆìŠµë‹ˆë‹¤.

```swift
protocol CalendarViewControllerDelegate: AnyObject {
    func calendarViewController(_ calendarViewController: UIViewController, didSelectDate dateComponents: DateComponents?)
}

extension CalendarViewController: UICalendarSelectionSingleDateDelegate {
    func dateSelection(_ selection: UICalendarSelectionSingleDate, didSelectDate dateComponents: DateComponents?) {
        delegate?.calendarViewController(self, didSelectDate: dateComponents)
        dismiss(animated: true)
    }
}
```
- `UICalendarSelectionSingleDateDelegate`ë¥¼ ì±„íƒí•˜ì—¬ ë‚ ì§œê°€ ì„ íƒë˜ì—ˆì„ ë•Œ `Delegate` íŒ¨í„´ì„ ì´ìš©í•˜ì—¬ ì„ íƒëœ `DateComponents`ë¥¼ ë„˜ê²¨ì£¼ì—ˆìŠµë‹ˆë‹¤.

### 6ï¸âƒ£ DelegateíŒ¨í„´ ìˆœí™˜ì°¸ì¡°

#### ğŸ”¥ ë¬¸ì œì 
`Delegate` íŒ¨í„´ì„ ì‚¬ìš©í•  ë•Œ ìˆœí™˜ì°¸ì¡°ê°€ ì¼ì–´ë‚˜ ë©”ëª¨ë¦¬ í•´ì œê°€ ë˜ì§€ ì•Šì„ ê°€ëŠ¥ì„±ì´ ìˆì—ˆìŠµë‹ˆë‹¤.

**ì˜ˆì‹œì½”ë“œ**
```swift
protocol ModelDelegate: AnyObject {}

class Model {
    var delegate: ModelDelegate?
        deinit {
        print("deinit Model")
    }
}

class ViewController: ModelDelegate {
    var model: Model?
    
    deinit {
        print("deinit ViewController")
    }
    
    func start() {
 
        model = Model()
        model?.delegate = self
    }
}

var viewController: ViewController? = ViewController()
viewController?.start()
viewController = nil
```
- `model?.delegate = self`ë¡œ `delegate` í”„ë¡œí¼í‹°ê°€ `ViewController`ë¥¼ ì°¸ì¡°í•˜ê³ , `ViewController`ì—ì„œ `Model`ì„ í”„ë¡œí¼í‹°ë¡œ ê°€ì§€ê³  ìˆì–´ ì°¸ì¡°í•˜ê²Œ ë©ë‹ˆë‹¤.
- ë”°ë¼ì„œ `ViewController = nil`ì„ í•˜ì—¬ `ViewController`ë¥¼ í•´ì œ ì‹œí‚¤ë ¤ê³  í•´ë„ ê°•í•œìˆœí™˜ì°¸ì¡°ê°€ ì¼ì–´ë‚˜ ë©”ëª¨ë¦¬ í•´ì œê°€ ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.

#### ğŸ§¯ í•´ê²°ë°©ë²•
ìˆœí™˜ì°¸ì¡°ê°€ ì¼ì–´ë‚˜ëŠ” ê²ƒì„ ë°©ì§€í•´ì£¼ê¸° ìœ„í•´ì„œ `delegate` í”„ë¡œí¼í‹°ë¥¼ `weak var`ë¡œ ì„ ì–¸í•˜ë„ë¡ í•˜ì˜€ìŠµë‹ˆë‹¤.

**ì˜ˆì‹œ ì½”ë“œ**
```swift
protocol ModelDelegate: AnyObject {}

class Model {
    weak var delegate: ModelDelegate?
        deinit {
        print("deinit Model")
    }
}

class ViewController: ModelDelegate {
    var model: Model?
    
    deinit {
        print("deinit ViewController")
    }
    
    func start() {
 
        model = Model()
        model?.delegate = self
    }
}

var viewController: ViewController? = ViewController()
viewController?.start()
viewController = nil

// deinit ViewController
// deinit Model
```
- `delegate` í”„ë¡œí¼í‹°ë¥¼ `weak var`ë¡œ ì•½í•œ ì°¸ì¡°í•˜ì—¬ `viewController = nil`ì„ í•˜ì—¬ë„ ê°•í•œ ìˆœí™˜ ì°¸ì¡°ê°€ ì¼ì–´ë‚˜ì§€ ì•Šê³  ë©”ëª¨ë¦¬ í•´ì œê°€ ë©ë‹ˆë‹¤.

**í”„ë¡œì íŠ¸ ì½”ë“œ**
```swift
final class CalendarViewController: UIViewController {
    weak var delegate: CalendarViewControllerDelegate?
    
    // ...
}
```

<a id="7."></a>
## 7. ğŸ”— ì°¸ê³  ë§í¬
- [ğŸApple: UICollectionViewDiffableDataSource](https://developer.apple.com/documentation/uikit/uicollectionviewdiffabledatasource)
- [ğŸApple: NSDiffableDataSourceSnapshot](https://developer.apple.com/documentation/uikit/nsdiffabledatasourcesnapshot)
- [ğŸApple: Hashable](https://developer.apple.com/documentation/swift/hashable)
- [ğŸApple: UICalendarView](https://developer.apple.com/documentation/uikit/uicalendarview#3992448)
- [ğŸ“—Velog: You donâ€™t (always) need [weak self]](https://velog.io/@haanwave/Article-You-dont-always-need-weak-self)
