# ğŸ¥ ë°•ìŠ¤ì˜¤í”¼ìŠ¤ ğŸ¿

## ğŸ“– ëª©ì°¨

1. [ğŸ“¢ ì†Œê°œ](#1.)
2. [ğŸ‘¤ íŒ€ì›](#2.)
3. [â±ï¸ íƒ€ì„ë¼ì¸](#3.)
4. [ğŸ“Š UML & íŒŒì¼íŠ¸ë¦¬](#4.)
5. [ğŸ“± ì‹¤í–‰ í™”ë©´](#5.)
6. [ğŸ§¨ íŠ¸ëŸ¬ë¸” ìŠˆíŒ…](#6.)
7. [ğŸ‘¬ íŒ€ íšŒê³ ](#7.)
8. [ğŸ”— ì°¸ê³  ë§í¬](#8.)

<br>

<a id="1."></a>

## 1. ğŸ“¢ ì†Œê°œ
`ì¼ë³„ ë°•ìŠ¤ì˜¤í”¼ìŠ¤ API`ë¥¼ ì´ìš©í•´ì„œ ë°•ìŠ¤ì˜¤í”¼ìŠ¤ ì •ë³´ë¥¼ ë°›ì•„ì˜¤ê³  ì›í•˜ëŠ” ì˜í™”ì˜ ì •ë³´ë¥¼ ë³´ì—¬ë“œë¦½ë‹ˆë‹¤!

> **í•µì‹¬ ê°œë… ë° ê²½í—˜**
> 
> - **Networking**
>   - `URLSession`ì„ ì´ìš©í•œ ë„¤íŠ¸ì›Œí‚¹
> - **TestDouble**
>   - `TestDouble` ê°ì²´ë¥¼ ì´ìš©í•˜ì—¬ ë„¤íŠ¸ì›Œí¬ê°€ ì—°ê²°ë˜ì–´ ìˆì§€ ì•Šì€ ê²½ìš°ì—ë„ í…ŒìŠ¤íŠ¸
> - **DTO**
>   - `JSON` ë°ì´í„°ë¥¼ ë””ì½”ë”©í•  `DTO` ê°ì²´ êµ¬í˜„
>     - ì‚¬ìš©í•  ë°ì´í„°ë§Œìœ¼ë¡œ ì´ë£¨ì–´ì§„ `Model` ê°ì²´ êµ¬í˜„
> - **CollectionView**
>   - `CollectionView`ë¥¼ í™œìš©í•œ UIêµ¬í˜„
>   - `CompositionalLayout`ë¥¼ í™œìš©í•œ `Layout` ì„¤ì •
>   - `DiffableDataSource`ë¥¼ í™œìš©í•œ UI ì—…ë°ì´íŠ¸
>   - `Grid` ëª¨ë“œ êµ¬í˜„
> - **MVC**
>   - `MVC`íŒ¨í„´ì„ í™œìš©í•˜ì—¬ ê°ì²´ë¥¼ ì—­í• ì— ì•Œë§ê²Œ ë¶„ë¦¬í•˜ì—¬ í”„ë¡œì íŠ¸ êµ¬í˜„
> - **NSCache**
>   - `NSCache`ë¥¼ í™œìš©í•˜ì—¬ ë°›ì•„ì˜¨ ì´ë¯¸ì§€ë¥¼ ì¬ì‚¬ìš©
> - **UICalendarView**
>   - `UICalendarView`ë¥¼ í™œìš©í•˜ì—¬ ë‹¬ë ¥ êµ¬í˜„
> - **UIAlertController**
>   - `actionSheet` í™œìš©

<br>

<a id="2."></a>

## 2. ğŸ‘¤ íŒ€ì›

| [kyungmin ğŸ¼](https://github.com/YaRkyungmin) | [Erick ğŸ¶](https://github.com/h-suo) |
| :--------: | :--------: | 
| <Img src = "https://cdn.discordapp.com/attachments/1100965172086046891/1108927085713563708/admin.jpeg" width="350"/>| <Img src = "https://user-images.githubusercontent.com/109963294/235300758-fe15d3c5-e312-41dd-a9dd-d61e0ab354cf.png" width="350"/>|

<br>

<a id="3."></a>
## 3. â±ï¸ íƒ€ì„ë¼ì¸

> í”„ë¡œì íŠ¸ ê¸°ê°„ :  2023.07.24 ~ 2023.08.18

|ë‚ ì§œ|ë‚´ìš©|
|:---:|---|
| **2023.07.24** |â–«ï¸ `JSON` ë°ì´í„°ë¥¼ ë””ì½”ë”©í•  `Entity` ê°ì²´ êµ¬í˜„ <br>|
| **2023.07.25** |â–«ï¸ ì½”ë“œ ê°œì„ ì„ ìœ„í•œ ë¦¬í™í† ë§ <br> |
| **2023.07.26** |â–«ï¸ ë„¤íŠ¸ì›Œí‚¹ ì‘ì—…ì„ í•  `NetworkManager` êµ¬í˜„ <br>|
| **2023.07.27** |â–«ï¸ `TestDouble`ì„ ì´ìš©í•œ í…ŒìŠ¤íŠ¸ ìƒì„± <br> |
| **2023.07.28** |â–«ï¸ ì½”ë“œ ê°œì„ ì„ ìœ„í•œ ë¦¬í™í† ë§ <br> â–«ï¸ README ì‘ì„± <br>|
| **2023.07.31** |â–«ï¸ `CollectionViewCell` êµ¬í˜„ <br>|
| **2023.08.01** |â–«ï¸ `CollectionView`ë¡œ UI êµ¬í˜„ <br> â–«ï¸ `BoxOffice`ì˜ ë°ì´í„°ë¥¼ ê°€ì ¸ì™€ ê´€ë¦¬í•˜ëŠ” `BoxOfficeManager`êµ¬í˜„ <br> â–«ï¸ ì‹¤ì œ ì‚¬ìš©í•  ë°ì´í„°ë§Œìœ¼ë¡œ ì´ë£¨ì–´ì§„ `Entity` ê°ì²´ `DailyBoxOffice` êµ¬í˜„ <br> â–«ï¸ `refreshControl`ì„ ì´ìš©í•œ ë°ì´í„° ë¦¬ë¡œë“œ ë¡œì§ êµ¬í˜„ <br>|
| **2023.08.02** |â–«ï¸ ë°ì´í„° ë¡œë“œì— ì‹¤íŒ¨í–ˆì„ ë•Œ `Alert`ê°€ ëœ¨ë„ë¡ êµ¬í˜„ <br>|
| **2023.08.03** |â–«ï¸ ì½”ë“œ ê°œì„ ì„ ìœ„í•œ ë¦¬í™í† ë§ <br> |
| **2023.08.04** |â–«ï¸ ì½”ë“œ ê°œì„ ì„ ìœ„í•œ ë¦¬í™í† ë§ <br> â–«ï¸ README ì‘ì„± <br>|
| **2023.08.05** |â–«ï¸ `MoiveDetailView` ë° `Controller` êµ¬í˜„ <br> â–«ï¸`BoxOfficeManager`ì— `fetchPosterImage`ì¶”ê°€ <br>|
| **2023.08.08** |â–«ï¸ ì´ë¯¸ì§€ ìºì‹±ì„ ìœ„í•œ `CacheManager` êµ¬í˜„ <br> â–«ï¸ `CalendarView`ë° `Controller` êµ¬í˜„ <br>|
| **2023.08.09** |â–«ï¸ ì½”ë“œ ê°œì„ ì„ ìœ„í•œ ë¦¬í™í† ë§ <br> |
| **2023.08.11** |â–«ï¸ ì½”ë“œ ê°œì„ ì„ ìœ„í•œ ë¦¬í™í† ë§ <br> â–«ï¸ README ì‘ì„± <br>|
| **2023.08.15** |â–«ï¸ `CollectionView`ì˜ `listMode`ì™€ `gridMode` êµ¬í˜„ <br> â–«ï¸ `actionSheet`ìœ¼ë¡œ ì‚¬ìš©ìê°€ `listMode`ì™€ `gridMode`ë¥¼ ì„ íƒí•  ìˆ˜ ìˆë„ë¡ êµ¬í˜„ <br> â–«ï¸ `listMode` ë° `DetailView`ì˜ ë‹¤ì´ë‚˜ë¯¹ íƒ€ì… êµ¬í˜„ <br>|
| **2023.08.17** |â–«ï¸ ì½”ë“œ ê°œì„ ì„ ìœ„í•œ ë¦¬í™í† ë§ <br> |
| **2023.08.18** |â–«ï¸ README ì‘ì„± <br> |

<br>

<a id="4."></a>
## 4. ğŸ“Š UML & íŒŒì¼íŠ¸ë¦¬

### UML

<Img src = "https://hackmd.io/_uploads/BypKlumh3.png" width=""/>

<br>

### íŒŒì¼íŠ¸ë¦¬
```
BoxOffice
â”œâ”€â”€ App
â”‚Â Â  â”œâ”€â”€ AppDelegate.swift
â”‚Â Â  â””â”€â”€ SceneDelegate.swift
â”œâ”€â”€ Controller
â”‚Â Â  â”œâ”€â”€ BoxOfficeViewController.swift
â”‚Â Â  â”œâ”€â”€ CalendarViewController.swift
â”‚Â Â  â””â”€â”€ MovieDetailViewController.swift
â”œâ”€â”€ Model
â”‚Â Â  â”œâ”€â”€ Manager
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ BoxOfficeManager.swift
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ CacheManager.swift
â”‚Â Â  â”‚Â Â  â””â”€â”€ DataManager.swift
â”‚Â Â  â”œâ”€â”€ DTO
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ BoxOffice.swift
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ Movie.swift
â”‚Â Â  â”‚Â Â  â””â”€â”€ PosterImageInformation.swift
â”‚Â Â  â”œâ”€â”€ DailyBoxOffice.swift
â”‚Â Â  â”œâ”€â”€ MovieInformation.swift
â”‚Â Â  â””â”€â”€ TestDouble
â”‚Â Â      â”œâ”€â”€ StubURLSession.swift
â”‚Â Â      â””â”€â”€ URLSessionProtocol.swift
â”œâ”€â”€ View
â”‚   â”œâ”€â”€ BoxOfficeCollectionViewGridCell.swift
â”‚   â”œâ”€â”€ BoxOfficeCollectionViewListCell.swift
â”‚   â””â”€â”€ MovieDetailScrollView.swift
â”œâ”€â”€ Extension
â”‚Â Â  â”œâ”€â”€ Date+.swift
â”‚Â Â  â”œâ”€â”€ DateFormatter+.swift
â”‚Â Â  â”œâ”€â”€ NumberFormatter+.swift
â”‚Â Â  â”œâ”€â”€ UIAlertController+.swift
â”‚Â Â  â”œâ”€â”€ UILabel+.swift
â”‚Â Â  â”œâ”€â”€ URL+.swift
â”‚Â Â  â”œâ”€â”€ URLRequest+.swift
â”‚Â Â  â””â”€â”€ URLSession+.swift
â”œâ”€â”€ Error
â”‚Â Â  â”œâ”€â”€ DataError.swift
â”‚Â Â  â””â”€â”€ NetworkError.swift
â”œâ”€â”€ NetWork
â”‚Â Â  â””â”€â”€ NetworkManager.swift
â””â”€â”€ Util
 Â Â  â””â”€â”€ Path.swift
```

<br>

<a id="5."></a>
## 5. ğŸ“± ì‹¤í–‰ í™”ë©´
| ë°•ìŠ¤ì˜¤í”¼ìŠ¤ ë°ì´í„° ë¡œë“œ | í™”ë©´ì„ ë‹¹ê²¨ ë°ì´í„° ë¦¬ë¡œë“œ |
| :--------------: | :-------: |
| <Img src = "https://hackmd.io/_uploads/BJdHyz9i3.gif" width="300"/> | <Img src = "https://hackmd.io/_uploads/ByZ1xfqi2.gif" width="300"/>  |
| **ë°ì´í„° ë¡œë“œì— ì‹¤íŒ¨í–ˆì„ ë•Œ ì•Œë¦¼í™”ë©´** | **ì˜í™” ìƒì„¸í™”ë©´** |
| <Img src = "https://hackmd.io/_uploads/H12xlf5jn.gif" width="300"/> | <Img src = "https://hackmd.io/_uploads/HJd7lDQ2n.gif" width="300"/> |
| **ë‚ ì§œì„ íƒ** | **í™”ë©´ ëª¨ë“œ ë³€ê²½** |
| <Img src = "https://hackmd.io/_uploads/r1FOxvQ3n.gif" width="300"/>  | <Img src = "https://hackmd.io/_uploads/r1PEKBh3n.gif" width="300"/> |

<br>

<a id="6."></a>
## 6. ğŸ§¨ íŠ¸ëŸ¬ë¸” ìŠˆíŒ…

### 1ï¸âƒ£ ê°ì²´ ë¶„ë¦¬

#### ğŸ”¥ ë¬¸ì œì 
`Controller`ë‚˜ í•˜ë‚˜ì˜ `Model`ì—ì„œ ë§ì€ ë¡œì§ì„ ì²˜ë¦¬í•˜ëŠ” ê²ƒë³´ë‹¨ ìì‹ ì˜ ì—­í• ì„ ê°€ì§„ ê°ì²´ë“¤ì„ ì˜ êµ¬í˜„í•˜ì—¬ í•„ìš”í• ë•Œë§Œ ë¶ˆëŸ¬ ì‚¬ìš©í•œë‹¤ë©´ ê°ì²´ê°„ì˜ ì˜ì¡´ì„±ë„ ë‚®ì¶”ê³  ì½”ë“œë¥¼ ì¬ì‚¬ìš©í•˜ëŠ” ì¸¡ë©´ì— ì¢‹ì„ ê²ƒ ê°™ì•„ ê°ì²´ ë¶„ë¦¬ì— ëŒ€í•œ ê³ ë¯¼ì„ ë§ì´ í–ˆìŠµë‹ˆë‹¤.

ë§ì€ ê¸°ëŠ¥ë“¤ì„ êµ¬í˜„í•˜ë‹¤ ë³´ë‹ˆ `Model`ìª½ì—ì„œ ê¸°ëŠ¥ ë¶„ë¦¬ë¥¼ ë§ì´ í–ˆìŒì—ë„ ë¶ˆêµ¬í•˜ê³  `VC`ì˜ ì½”ë“œê°€ ê¸¸ì–´ì ¸ ê°€ë…ì„±ì´ ë–¨ì–´ì§€ëŠ” ë¬¸ì œê°€ ìˆì—ˆìŠµë‹ˆë‹¤.

#### ğŸ§¯ í•´ê²°ë°©ë²•
**1. Modelì˜ ê¸°ëŠ¥ ë¶„ë¦¬**
ë‹¤ìŒê³¼ ê°™ì´ ìì‹ ì˜ ì—­í• ì„ ê°€ì§„ ê°ì²´ë¥¼ ë§Œë“¤ì–´ í”„ë¡œì íŠ¸ë¥¼ êµ¬í˜„í•˜ì˜€ìŠµë‹ˆë‹¤.

> - **DTO** : ì„œë²„ë¡œë¶€í„° ë°›ì€ `Data`ë¥¼ `Decode`í• ë•Œ ì“°ëŠ” íƒ€ì…
> - **Model Data** : ì‹¤ì œ `App`ì—ì„œ ì‚¬ìš©í•  `Data` íƒ€ì…
> - **DataManager** : `DTO`ë¥¼ `Model Data`ë¡œ ë³€í™˜í•´ì£¼ëŠ” ì—­í™œ
> - **NetworkManager** : ì„œë²„ë¡œë¶€í„° `Data`ë¥¼ ë°›ì•„ì˜¤ëŠ” ì—­í• 
> - **BoxOfficeManager** : `Controller`ì—ì„œ í•„ìš”í•œ ë°ì´í„°ë¥¼ ë°›ì•„ ê´€ë¦¬í•˜ëŠ” íƒ€ì…
> - **Extension**
>   - URLSession : í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•´ `URLSeesionProtocol`ì„ ì±„íƒí•˜ê¸° ìœ„í•œ `extension`
>   - URLRequest : `Header`ê°’ì„ ì§€ì •í•œ `URLRequest`ë¥¼ ë°˜í™˜í•´ì£¼ëŠ” `kakaoURLRequest` ë©”ì„œë“œ ì¶”ê°€
>   - URL : `URL`ì„ ìƒì„±í•˜ëŠ” `kobisURL`, `kakaoURL` ë©”ì„œë“œ ì¶”ê°€
>   - UILabel : `attributedText`ì˜ ë¶€ë¶„ ìƒ‰ì„ ë³€ê²½í•´ì£¼ëŠ” `convertColor`ë©”ì„œë“œ ì¶”ê°€
>   - UIAlertController : ì»¤ìŠ¤í…€í•œ `UIAlertController`ì„ ë°˜í™˜í•˜ëŠ” `customAlert` ë©”ì„œë“œ ì¶”ê°€
>   - Date : `Date`ë¥¼ ë°˜í™˜í•´ì£¼ëŠ” `date`ë©”ì„œë“œ ì¶”ê°€
>   - DateFormatter : ì˜¤ëŠ˜ë¡œë¶€í„° ì›í•˜ëŠ” ë§Œí¼ ë–¨ì–´ì§„ ë‚ ì§œë¥¼ ì›í•˜ëŠ” í¬ë©§ìœ¼ë¡œ ë°˜í™˜í•˜ëŠ” `dateString` ë©”ì„œë“œ ì¶”ê°€
>   - NumberFormatter : ìˆ«ìë¡œ ì´ë£¨ì–´ì§„ `String`ì„ ë°›ì•„ `Decimal`ìŠ¤íƒ€ì¼ë¡œ í¬ë©§í•´ì£¼ëŠ” `decimalString` ë©”ì„œë“œ ì¶”ê°€


**2. VC ê¸°ëŠ¥ ë¶„ë¦¬**
`extension`ê³¼ `MARK`ë¥¼ ì´ìš©í•´ ê¸°ëŠ¥ ë¶„ë¦¬ë¥¼ í•´ì„œ ì½”ë“œì˜ ê°€ë…ì„±ì„ ë†’ì˜€ìŠµë‹ˆë‹¤.

>#### ğŸ”ºextension í•˜ì§€ ì•Šì€ ë¶€ë¶„
>- stored property
>- initializer
>- viewDidLoad
>#### ğŸ”ºextension-setupComponents
>- componentê´€ë ¨ ì„¸íŒ…
>#### ğŸ”ºextension-configureUI
>- ê°ê°ì˜ UIê°ì²´ì˜ addSubview
>#### ğŸ”ºextension-setupConstraint
>- ê°ê°ì˜ UIê°ì²´ì˜ constraint
>#### ğŸ”ºextension-buttonAction
>- ë²„íŠ¼ ë©”ì„œë“œ
>#### ğŸ”ºê·¸ ì™¸ ê¸°ëŠ¥
>- ë¸ë¦¬ê²Œì´íŠ¸, ë°ì´í„°ì†ŒìŠ¤ ë“±..

<br>

### 2ï¸âƒ£ Test Double

#### ğŸ”¥ ë¬¸ì œì 
ë„¤íŠ¸ì›Œí¬ê°€ ì—°ê²°ë˜ì–´ ìˆì§€ ì•Šì€ ìƒí™©ì—ì„œë„ `NetworkManager`ì˜ `startLoad` ë¡œì§ì´ ì˜ ì‘ë™í•˜ëŠ”ì§€ í…ŒìŠ¤íŠ¸ë¥¼ í•˜ê³  ì‹¶ì—ˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ `URLSession`ì˜ `dataTask` ë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ê³  ìˆì—ˆê¸° ë•Œë¬¸ì— ë„¤íŠ¸ì›Œí¬ê°€ ì—°ê²°ë˜ì–´ ìˆì§€ ì•Šì€ ìƒí™©ì—ì„œëŠ” í…ŒìŠ¤íŠ¸ê°€ ì–´ë ¤ì› ìŠµë‹ˆë‹¤.

#### ğŸ§¯ í•´ê²°ë°©ë²•
í…ŒìŠ¤íŠ¸ê°€ ì–´ë ¤ìš´ ê²½ìš° ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” `Test Double` ê°ì²´ `StubURLSession`ì„ êµ¬í˜„í•˜ì—¬ í…ŒìŠ¤íŠ¸ë¥¼ ì§„í–‰í•˜ì˜€ìŠµë‹ˆë‹¤. `StubURLSession`ëŠ” ì‹¤ì œ `dataTask`ì˜ ì—­í• ì„ ìˆ˜í–‰í•˜ì§„ ì•Šì§€ë§Œ ê»ë°ê¸° `dataTask`ë¥¼ ê°€ì§€ê³  ìˆì–´ ë„£ì–´ì¤€ `Dummy Data`ë¥¼ ë°˜í™˜í•˜ëŠ” ê°ì²´ì…ë‹ˆë‹¤.

**ğŸ’‰ ì˜ì¡´ì„± ì£¼ì…**
```swift
protocol URLSessionProtocol {
    func dataTask(with urlRequest: URLRequest,  completionHandler: @escaping DataTaskCompletionHandler) -> URLSessionDataTask
}
```

```swift
struct NetworkManager {
    private let urlSession: URLSessionProtocol
    
    // ...
}
```
- `URLSessionProtocol`ì„ ë§Œë“¤ì–´ `NetworkManager`ê°€ í”„ë¡œí¼í‹°ë¡œ í•´ë‹¹ íƒ€ì…ì„ ê°€ì§€ê³  ìˆë„ë¡ í•˜ì—¬ `URLSession`ë¿ë§Œ ì•„ë‹ˆë¼ `StubURLSession`ì„ ì£¼ì…í•  ìˆ˜ ìˆë„ë¡ í•˜ì—¬ í…ŒìŠ¤íŠ¸í–ˆìŠµë‹ˆë‹¤.

**âœ… í…ŒìŠ¤íŠ¸**

```swift
// given
// ë°›ì•„ì˜¬ ë°ì´í„°ë¥¼ ì„ì˜ë¡œ ìƒì„±
let dummy = DummyData(data: data, response: response, error: nil)
let stubUrlSession = StubURLSession(dummy: dummy)
sut = NetworkManager(urlSession: stubURLSession)

// when
sut?.requestData(from: url, completion: { result in
    // then
    // startLoadë¡œ ë°›ì•„ì˜¨ ë°ì´í„°ëŠ” DummyDataì˜ ë°ì´í„°
    XCTAssertEqual(data, dataAsset.data)
    expectation.fulfill()
})
```
- `StubURLSession`ëŠ” `DummyData`ë¥¼ ê°€ì§€ê³  `dataTask` ë©”ì„œë“œë¥¼ ì‹¤í–‰ì‹œ `StubURLSessionDataTask`ì„ ì´ìš©í•´ì„œ `DummyData`ë§Œ ë˜ì ¸ì£¼ë„ë¡ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤.

<br>

### 3ï¸âƒ£ Closure Capture

#### ğŸ”¥ ë¬¸ì œì 
`BoxOfficeManager`ì˜ `fetchBoxOffice`ì—ì„œ `requestData`ë¡œ ë„¤íŠ¸ì›Œí‚¹ì„í•˜ì—¬ ë°ì´í„°ë¥¼ ë°›ì•„ì˜¤ëŠ” ë¡œì§ì— í´ë¡œì ¸ ë‚´ì—ì„œ `BoxOfficeManager`ì˜ í”„ë¡œí¼í‹°ì¸ `dailyBoxOffices`ë¡œ ì ‘ê·¼í•˜ì—¬ í”„ë¡œí¼í‹°ë¥¼ ë³€ê²½í•˜ëŠ” ë¡œì§ì´ ìˆì—ˆìŠµë‹ˆë‹¤. ì´ë•Œ í´ë¡œì ¸ê°€ `self`ë¥¼ ìº¡ì³í•˜ë©´ì„œ RCê°€ ì˜¬ë¼ê°€ ë©”ëª¨ë¦¬ í•´ì œê°€ ì•ˆë˜ëŠ” ê°•í•œì°¸ì¡°ìˆœí™˜ì´ ë°œìƒí•  ìˆ˜ ìˆë‹¤ëŠ” ë¬¸ì œê°€ ìˆì—ˆìŠµë‹ˆë‹¤.

```swift
final class BoxOfficeManager {
    private(set) var dailyBoxOffices: [DailyBoxOffice] = []
    
    // ...
    func fetchBoxOffice(completion: @escaping (Bool) -> Void) {
        
        // ...
        networkManager.requestData(from: url) { result in
            switch result {
            case .success(let data):
                do {
                    let boxOffice = try JSONDecoder().decode(BoxOffice.self, from: data)
                    self.dailyBoxOffices = DataManager.boxOfficeTransferDailyBoxOfficeData(boxOffice: boxOffice)
                    completion(true)
                } // ...
            }
        }
    }
}
```

#### ğŸ§¯ í•´ê²°ë°©ë²•
í´ë¡œì ¸ì˜ ìº¡ì³ë¡œ `self`ì˜ RCê°€ ì˜¬ë¼ê°€ëŠ” ê²ƒì„ ë§‰ì•„ì£¼ê¸° ìœ„í•´ `[weak self]`ë¡œ í´ë¡œì ¸ë¥¼ ìº¡ì³í•˜ì—¬ ê°•í•œìˆœí™˜ì°¸ì¡°ë¥¼ ì˜ˆë°©í•˜ì˜€ìŠµë‹ˆë‹¤.

```swift
final class BoxOfficeManager {
    private(set) var dailyBoxOffices: [DailyBoxOffice] = []
    
    // ...
    func fetchBoxOffice(completion: @escaping (Bool) -> Void) {
        
        // ...
        networkManager.requestData(from: url) { [weak self] result in
            guard let self else {
                return
            }
                                               
            switch result {
            case .success(let data):
                do {
                    let boxOffice = try JSONDecoder().decode(BoxOffice.self, from: data)
                    self.dailyBoxOffices = DataManager.boxOfficeTransferDailyBoxOfficeData(boxOffice: boxOffice)
                    completion(true)
                } // ...
            }
        }
    }
}
```

<br>

### 4ï¸âƒ£ endRefreshing

#### ğŸ”¥ ë¬¸ì œì 
í™”ë©´ì„ ìœ„ë¡œ ë“œë ˆê·¸í•˜ì—¬ ë°ì´í„°ë¥¼ ë¦¬ë¡œë“œí•  ë•Œ ë°ì´í„° ë¡œë“œì— ì‹¤íŒ¨í•˜ë©´ `alert`ì´ ëœ¨ëŠ”ë° ì´ë•Œ `refreshControl?.endRefreshing()`ì´ ì•ˆë˜ëŠ” ë¬¸ì œê°€ ìˆì—ˆìŠµë‹ˆë‹¤.

<Img src = "https://hackmd.io/_uploads/Hyq_Iz9o3.gif" width="300"/>

#### ğŸ§¯ í•´ê²°ë°©ë²•
`endRefreshing`ì˜ ì• ë‹ˆë©”ì´ì…˜ íš¨ê³¼ì™€ `present`ì˜ ì• ë‹ˆë©”ì´ì…˜ íš¨ê³¼ë¥¼ ë™ì‹œì— ì²˜ë¦¬í•˜ì§€ ëª»í•˜ì—¬ ë°œìƒí•˜ëŠ” ì—ëŸ¬ì˜€ìŠµë‹ˆë‹¤.
`present`ì˜ `animated`ë¥¼ `false`ë¡œ ì„¤ì •í•˜ì—¬ í•´ê²°í•˜ì˜€ìŠµë‹ˆë‹¤.

```swift
present(alert, animated: false)
```
<Img src = "https://hackmd.io/_uploads/rkRtvMqi3.gif" width="300"/>

<br>

### 5ï¸âƒ£ Hashable

#### ğŸ”¥ ë¬¸ì œì 
ê¸°ì¡´ì˜ `CollectionView`ì— `CompositionalLayout`ì™€ `DiffableDataSource`ë¥¼ ì ìš©í•˜ëŠ” ê³¼ì •ì—ì„œ `DailyBoxOffice` ê°ì²´ê°€ `Hashable`ì„ ì±„íƒí•´ì•¼ í–ˆìŠµë‹ˆë‹¤.
ê·¸ë¦¬ê³  `Hashalbe`ì„ ì±„íƒí•  ë•Œ `struct`ì˜ ëª¨ë“  í”„ë¡œí¼í‹°ëŠ” `Hashable`ì„ ì¤€ìˆ˜í•´ì•¼ í•œë‹¤ê³  ë‚˜ì™€ìˆì—ˆì§€ë§Œ `rankStateColor`ëŠ” `typealias` íƒ€ì…ì´ë¼ `Hashable`ì„ ì¤€ìˆ˜í•˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.
> For a struct, all its stored properties must conform to Hashable.

#### ğŸ§¯ í•´ê²°ë°©ë²•
`rankStateColor`ëŠ” `rankState property`ë¥¼ í†µí•´ì„œ ë§Œë“¤ì–´ì§€ëŠ” `property`ì´ê¸° ë•Œë¬¸ì—
`hash value`ë¥¼ ë¹„êµí• ë•Œ í•„ìš”í•˜ì§€ ì•ŠëŠ” ê°’ì´ë¼ê³  ìƒê°í•´ì„œ `hash`í•¨ìˆ˜ì—ì„œ ë¹¼ì¤¬ìŠµë‹ˆë‹¤.

```swift
typealias RankStateColor = (targetString: String, color: UIColor)

struct DailyBoxOffice: Hashable {
    let movieCode: String
    let rank: String
    let rankState: String
    let movieTitle: String
    let dailyAndTotalAudience: String
    let rankStateColor: RankStateColor
    
    static func == (lhs: DailyBoxOffice, rhs: DailyBoxOffice) -> Bool {
        return lhs.movieCode == rhs.movieCode
            && lhs.rank == rhs.rank
            && lhs.rankState == rhs.rankState
            && lhs.movieTitle == rhs.movieTitle
            && lhs.dailyAndTotalAudience == rhs.dailyAndTotalAudience
    }
    
    func hash(into hasher: inout Hasher) {
        hasher.combine(movieCode)
        hasher.combine(rank)
        hasher.combine(rankState)
        hasher.combine(movieTitle)
        hasher.combine(dailyAndTotalAudience)
    }
}
```

<br>

### 6ï¸âƒ£ DelegateíŒ¨í„´ ìˆœí™˜ì°¸ì¡°

#### ğŸ”¥ ë¬¸ì œì 
`Delegate` íŒ¨í„´ì„ ì‚¬ìš©í•  ë•Œ ìˆœí™˜ì°¸ì¡°ê°€ ì¼ì–´ë‚˜ ë©”ëª¨ë¦¬ í•´ì œê°€ ë˜ì§€ ì•Šì„ ê°€ëŠ¥ì„±ì´ ìˆì—ˆìŠµë‹ˆë‹¤.

**ì˜ˆì‹œì½”ë“œ**
```swift
protocol ModelDelegate: AnyObject {}

class Model {
    var delegate: ModelDelegate?
        deinit {
        print("deinit Model")
    }
}

class ViewController: ModelDelegate {
    var model: Model?
    
    deinit {
        print("deinit ViewController")
    }
    
    func start() {
 
        model = Model()
        model?.delegate = self
    }
}

var viewController: ViewController? = ViewController()
viewController?.start()
viewController = nil
```
- `model?.delegate = self`ë¡œ `delegate` í”„ë¡œí¼í‹°ê°€ `ViewController`ë¥¼ ì°¸ì¡°í•˜ê³ , `ViewController`ì—ì„œ `Model`ì„ í”„ë¡œí¼í‹°ë¡œ ê°€ì§€ê³  ìˆì–´ ì°¸ì¡°í•˜ê²Œ ë©ë‹ˆë‹¤.
- ë”°ë¼ì„œ `ViewController = nil`ì„ í•˜ì—¬ `ViewController`ë¥¼ í•´ì œ ì‹œí‚¤ë ¤ê³  í•´ë„ ê°•í•œìˆœí™˜ì°¸ì¡°ê°€ ì¼ì–´ë‚˜ ë©”ëª¨ë¦¬ í•´ì œê°€ ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.

#### ğŸ§¯ í•´ê²°ë°©ë²•
ìˆœí™˜ì°¸ì¡°ê°€ ì¼ì–´ë‚˜ëŠ” ê²ƒì„ ë°©ì§€í•´ì£¼ê¸° ìœ„í•´ì„œ `delegate` í”„ë¡œí¼í‹°ë¥¼ `weak var`ë¡œ ì„ ì–¸í•˜ë„ë¡ í•˜ì˜€ìŠµë‹ˆë‹¤.

**ì˜ˆì‹œ ì½”ë“œ**
```swift
protocol ModelDelegate: AnyObject {}

class Model {
    weak var delegate: ModelDelegate?
        deinit {
        print("deinit Model")
    }
}

class ViewController: ModelDelegate {
    var model: Model?
    
    deinit {
        print("deinit ViewController")
    }
    
    func start() {
 
        model = Model()
        model?.delegate = self
    }
}

var viewController: ViewController? = ViewController()
viewController?.start()
viewController = nil

// deinit ViewController
// deinit Model
```
- `delegate` í”„ë¡œí¼í‹°ë¥¼ `weak var`ë¡œ ì•½í•œ ì°¸ì¡°í•˜ì—¬ `viewController = nil`ì„ í•˜ì—¬ë„ ê°•í•œ ìˆœí™˜ ì°¸ì¡°ê°€ ì¼ì–´ë‚˜ì§€ ì•Šê³  ë©”ëª¨ë¦¬ í•´ì œê°€ ë©ë‹ˆë‹¤.

**í”„ë¡œì íŠ¸ ì½”ë“œ**
```swift
final class CalendarViewController: UIViewController {
    weak var delegate: CalendarViewControllerDelegate?
    
    // ...
}
```

<br>

### 7ï¸âƒ£ í™”ë©´ ëª¨ë“œ ë³€ê²½ ì• ë‹ˆë©”ì´ì…˜

#### ğŸ”¥ ë¬¸ì œì 
ì²˜ìŒì—ëŠ” ëª¨ë“œ ë³€ê²½ì„ í•  ë•Œ `collectionView.reloadData()`ë¡œ ëª¨ë“  ì…€ì„ ë‹¤ì‹œ ë¡œë“œí•˜ì˜€ìŠµë‹ˆë‹¤. 
ì´ëŸ´ ê²½ìš° ì• ë‹ˆë©”ì´ì…˜ ì—†ì´ í™”ë©´ì´ ë°”ë¡œ ë°”ê»´ ì‚¬ìš©ì ê²½í—˜ì„ ì €í•˜ì‹œí‚¬ ìˆ˜ ìˆë‹¤ëŠ” ë‹¨ì ì´ ìˆì—ˆìŠµë‹ˆë‹¤.

<Img src = "https://hackmd.io/_uploads/rkA6tFnnn.gif" width="300"/>

#### ğŸ§¯ í•´ê²°ë°©ë²•
`setCollectionViewLayout`ê³¼ `reloadSections`ì„ ì‚¬ìš©í•˜ì—¬ `layout`ì´ ë°”ë€ŒëŠ” ìˆœê°„ê³¼ `section`ì´ ë¦¬ë¡œë“œ ë˜ëŠ” ìˆœê°„ì— ì• ë‹ˆë©”ì´ì…˜ íš¨ê³¼ë¥¼ ì£¼ì—ˆìŠµë‹ˆë‹¤.

**layoutì´ ì—…ë°ì´íŠ¸ ë  ë•Œ ì• ë‹ˆë©”ì´ì…˜**
```swift
switch collectionViewMode {
case .list:
    collectionView.setCollectionViewLayout(listLayout(), animated: true)
case .grid:
    collectionView.setCollectionViewLayout(gridLayout(), animated: true)
}
```

**reloadSectionsì™€ applyë¥¼ ì‚¬ìš©í•˜ì—¬ sectionì´ ì—…ë°ì´íŠ¸ ë  ë•Œ ì• ë‹ˆë©”ì´ì…˜**
```swift
var snapshot = NSDiffableDataSourceSnapshot<Section, DailyBoxOffice>()
snapshot.appendSections([.main])
snapshot.appendItems(boxOfficeManager.dailyBoxOffices, toSection: .main)
snapshot.reloadSections([.main])

dailyBoxOfficeDataSource.apply(snapshot, animatingDifferences: true)
```

<br>

### 8ï¸âƒ£ dynamic typeê³¼ labelì˜ ë„ˆë¹„

#### ğŸ”¥ ë¬¸ì œì 
`DetailView`ì— `dynamic type`ì„ ì ìš©í–ˆì„ë•Œ ê¸€ì”¨ê°€ ì»¤ì§ˆ ê²½ìš° ê°ë…, ì œì‘ë…„ë„, ê°œë´‰ì¼ ë“±ì˜ `titleLabel`ì˜ í¬ê¸°ê°€ ë™ì¼í•œ ë¹„ìœ¨ì„ ìœ ì§€í•˜ë©° ì»¤ì§€ì§€ ì•ŠëŠ” ë¬¸ì œê°€ ìˆì—ˆìŠµë‹ˆë‹¤.

<Img src = "https://hackmd.io/_uploads/H1QcsYn33.png" width="300"/>

#### ğŸ§¯ í•´ê²°ë°©ë²•
`titleLabel`ì˜ `widthAnchor`ë¥¼ `heightAnchor`ì˜ 3ë°°ë¡œ ì„¤ì •í•˜ì—¬ ë¹„ìœ¨ì„ ì£¼ê³  `setContentCompressionResistancePriority`ë¡œ ë†’ì´ê°€ ìš°ì„ ì ìœ¼ë¡œ ëŠ˜ì–´ë‚  ìˆ˜ ìˆê²Œ í•˜ì—¬ ê¸€ì”¨ê°€ ì»¤ì§ˆ ê²½ìš°ì—ë„ ë¹„ìœ¨ì— ë§ê²Œ `label`ì˜ ë„ˆë¹„ê°€ ëŠ˜ì–´ë‚  ìˆ˜ ìˆë„ë¡ í•˜ì˜€ìŠµë‹ˆë‹¤.

```swift
let titleLabelConstraint = titleLabel.widthAnchor.constraint(equalTo: titleLabel.heightAnchor, multiplier: 3)
titleLabel.setContentCompressionResistancePriority(.required, for: .vertical)
```

<Img src = "https://hackmd.io/_uploads/Hy5JhYhn2.png" width="300"/>

<br>

<a id="7."></a>
## 7. ğŸ‘¬ íŒ€ íšŒê³ 
### ğŸ˜ƒ ì˜í•œ ì 
- ê°ì²´ë¶„ë¦¬ì— ëŒ€í•´ ë§ì´ ê³ ë¯¼í–ˆìŠµë‹ˆë‹¤. ë‹¤ë¥¸ ê°ì²´ì™€ì˜ ê²°í•©ë„ë¥¼ ë‚®ì¶”ëŠ”ë° ì§‘ì¤‘í–ˆê³ , ì´ë¡œì¸í•´ ê°€ë…ì„±ê³¼ ìœ ì§€ë³´ìˆ˜ì„±ì´ ë†’ì€ ì½”ë“œë¥¼ ì‘ì„±í–ˆìŠµë‹ˆë‹¤. 
- ì´í•´ë˜ì§€ ì•ŠëŠ” ë¶€ë¶„ì€ ì‹œê°„ì´ ê±¸ë¦¬ë”ë¼ë„ ìµœëŒ€í•œ ì´í•´í•˜ë ¤ê³  ë…¸ë ¥í–ˆìŠµë‹ˆë‹¤.
- ìƒˆë¡œìš´ ê¸°ìˆ  ìŠ¤íƒì„ ì‚¬ìš©í•  ë•Œ, í•´ë‹¹ ê¸°ìˆ ì˜ ê³µì‹ ë¬¸ì„œë¥¼ ê¼¼ê¼¼íˆ ì½ê³  ì‚¬ìš©í–ˆìŠµë‹ˆë‹¤.
- í”„ë¡œì íŠ¸ ì§„í–‰ ì¤‘ ë¬¸ì œê°€ ë°œìƒí•˜ê±°ë‚˜ ë²„ê·¸ë¥¼ í•´ê²°í•  ë•Œ ê³µì‹ë¬¸ì„œë¥¼ ì˜ í™œìš©í–ˆìŠµë‹ˆë‹¤.

### ğŸ˜¢ ì•„ì‰¬ì› ë˜ ì 
- `Protocol`ì„ ë§ì´ í™œìš©í•˜ì§€ ëª»í•œ ë¶€ë¶„ì´ ì•„ì‰¬ì› ìŠµë‹ˆë‹¤.
- `POP`ì— ëŒ€í•œ ê³ ë¯¼ì„ í•˜ì§€ ëª»í•œ ì ì´ ì•„ì‰¬ì› ìŠµë‹ˆë‹¤.

<br>

<a id="8."></a>
## 8. ğŸ”— ì°¸ê³  ë§í¬
- [ğŸApple: CodingKey](https://developer.apple.com/documentation/swift/codingkey)
- [ğŸApple: URLSession](https://developer.apple.com/documentation/foundation/urlsession)
- [ğŸApple: Fetching Website Data into Memory](https://developer.apple.com/documentation/foundation/url_loading_system/fetching_website_data_into_memory)
- [ğŸApple: Capturing Values](https://docs.swift.org/swift-book/documentation/the-swift-programming-language/closures/#Capturing-Values)
- [ğŸApple: UICollectionViewCompositionalLayout](https://developer.apple.com/documentation/uikit/uicollectionviewcompositionallayout)
- [ğŸApple: UICollectionViewDiffableDataSource](https://developer.apple.com/documentation/uikit/uicollectionviewdiffabledatasource)
- [ğŸApple: NSDiffableDataSourceSnapshot](https://developer.apple.com/documentation/uikit/nsdiffabledatasourcesnapshot)
- [ğŸApple: Hashable](https://developer.apple.com/documentation/swift/hashable)
- [ğŸApple: UICalendarView](https://developer.apple.com/documentation/uikit/uicalendarview#3992448)
- [ğŸApple: estimated(_:)](https://developer.apple.com/documentation/uikit/nscollectionlayoutdimension/3199057-estimated)
- [ğŸApple: setCollectionViewLayout(_:animated:)](https://developer.apple.com/documentation/uikit/uicollectionview/1618086-setcollectionviewlayout)
- [ğŸApple: reloadSections(_:)](https://developer.apple.com/documentation/uikit/nsdiffabledatasourcesnapshot/3375784-reloadsections)
- [ğŸ»ì•¼ê³°ë‹·ë„·: Unit Test](https://yagom.net/courses/unit-test-ì‘ì„±í•˜ê¸°/)
- [ğŸ“—Velog: You donâ€™t (always) need [weak self]](https://velog.io/@haanwave/Article-You-dont-always-need-weak-self)
