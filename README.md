# ë°•ìŠ¤ì˜¤í”¼ìŠ¤ğŸ¬
## ì†Œê°œ
> ì˜í™”ì§„í¥ìœ„ì›íšŒì™€ Daum ê²€ìƒ‰ APIë¥¼ í†µí•´ ë‚ ì§œë³„ ë°•ìŠ¤ì˜¤í”¼ìŠ¤, ì˜í™” ìƒì„¸ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì•±ì…ë‹ˆë‹¤.

**í”„ë¡œì íŠ¸ ê¸°ê°„ : 23/07/24~23/08/18**
</br>

## ëª©ì°¨
1. [íŒ€ì› ì†Œê°œ](#1.)
2. [íƒ€ì„ ë¼ì¸](#2.)
3. [ì‹œê°í™” êµ¬ì¡°](#3.)
4. [ì‹¤í–‰ í™”ë©´](#4. )
5. [í•µì‹¬ ê²½í—˜](#5.)
6. [íŠ¸ëŸ¬ë¸” ìŠˆíŒ…](#6.)
7. [ì°¸ê³  ìë£Œ](#7.)
8. [íŒ€ íšŒê³ ](#8.)

</br>

<a id="1."></a></br>
## íŒ€ì› ì†Œê°œ
|<Img src =  "https://hackmd.io/_uploads/rJj1EtKt2.png" width="200" height="200">|<Img src="https://hackmd.io/_uploads/rk62zRiun.png" width="200">|
|:-:|:-:|
|[**Yetti**](https://github.com/iOS-Yetti)|[**maxhyunm**](https://github.com/maxhyunm)|

<a id="2."></a></br>
## íƒ€ì„ ë¼ì¸
|ë‚ ì§œ|ë‚´ìš©|
|:--:|--|
|2023.07.24.| json íŒŒì¼ íŒŒì‹±ì„ ìœ„í•œ BoxOfficeEntity íƒ€ì… ìƒì„±, ë””ì½”ë”© ìœ ë‹›í…ŒìŠ¤íŠ¸ ì§„í–‰ |
|2023.07.25.| DecodingManagerì—ì„œ ë””ì½”ë”©ë§Œ ì§„í–‰í•  ìˆ˜ ìˆë„ë¡ ê¸°ëŠ¥ ë¶„ë¦¬ |
|2023.07.26.| NetworkingManager, BoxOfficeError, MoviewDetailEntity íƒ€ì… ìƒì„± |
|2023.07.27.| extensionìœ¼ë¡œ ì¤‘ì²©íƒ€ì… ë¶„ë¦¬, URLNamespace íƒ€ì… ìƒì„± |
|2023.07.31.| í”„ë¡œì íŠ¸ ì§„í–‰ì„ ìœ„í•œ ê°œì¸ ê³µë¶€ì‹œê°„ |
|2023.08.01.| í”„ë¡œì íŠ¸ ì§„í–‰ì„ ìœ„í•œ ê°œì¸ ê³µë¶€ì‹œê°„ |
|2023.08.02.| CollectionViewì„¸íŒ…, BoxOfficeRankingCell ìƒì„± ë° ì…€ êµ¬ì„± ì„¸íŒ…,  DiffableDataSource ì„¸íŒ… ë° ì—°ê²°, ë­í‚¹ ì¦ê°ë¶„ AttributedString ì²˜ë¦¬, collectionViewì— refreshControl ì¶”ê°€ |
|2023.08.07.| ë¦¬ë·°ì— ë”°ë¥¸ ë¦¬íŒ©í† ë§ ì§„í–‰  |
|2023.08.08.|DaumImageEntity íŒŒì¼ ì¶”ê°€ ë° DAUM_API_KEY ì¶”ê°€, MovieDetailViewController íŒŒì¼ ì¶”ê°€ ë° view ì „í™˜ ë©”ì„œë“œ ì¶”ê°€, MoviewDetailViewControllerì— MoviewDetail ë„¤íŠ¸ì›Œí¬ ì—°ê²° |
|2023.08.09.|í”„ë¡œì íŠ¸ ì§„í–‰ì„ ìœ„í•œ ê°œì¸ ê³µë¶€ì‹œê°„|
|2023.08.10.|ìŠ¤íƒë·°ì˜ textì„¤ì •ë©”ì„œë“œ ê¸°ëŠ¥ ë¶„ë¦¬ ë° Namespace ìƒì„±, MovieDetailView ë¡œë”©í™”ë©´ ìˆ˜ì • |
|2023.08.11.|README ì‘ì„±|
|2023.08.14.|url í˜¸ì¶œ ì‹¤íŒ¨ì‹œ completionìœ¼ë¡œ ì—ëŸ¬ì²˜ë¦¬ ì¶”ê°€, MovieDetailViewControllerì—ì„œ isDataLoading, isImageLoading í˜¸ì¶œ ìœ„ì¹˜ ë³€ê²½|
|2023.08.15.|í”„ë¡œì íŠ¸ ì§„í–‰ì„ ìœ„í•œ ê°œì¸ ê³µë¶€ì‹œê°„|
|2023.08.16.|í™”ë©´ ëª¨ë“œ ë³€ê²½ ë²„íŠ¼ ì¶”ê°€ BoxOfficeRankingIconCell íƒ€ì… ìƒì„±, í™”ë©´ ëª¨ë“œ ë³€ê²½ì‹œ CollectionViewì˜ ë ˆì´ì•„ì›ƒ ì„¤ì •ì„ ë°”ê¾¸ëŠ” ê¸°ëŠ¥ êµ¬í˜„, í…ìŠ¤íŠ¸ì— ë‹¤ì´ë‚˜ë¯¹ íƒ€ì… ì ìš© ë° auto layout ìˆ˜ì •|
|2023.08.17.|APIKey ê²€ì¦ê³¼ì • ë° ì—ëŸ¬ì²˜ë¦¬ ì¶”ê°€, ë‚ ì§œ ë³€ê²½ì‹œ ì»¬ë ‰ì…˜ë·° ë ˆì´ì•„ì›ƒ í‹€ì–´ì§€ëŠ” ì˜¤ë¥˜ ìˆ˜ì •|
|2023.08.18.|README ì‘ì„±|

<a id="3."></a></br>
## ì‹œê°í™” êµ¬ì¡°
### File Tree
    â”œâ”€â”€ BoxOffice
    â”‚Â Â  â”œâ”€â”€ Extension
    â”‚Â Â  â”‚Â Â  â”œâ”€â”€ DateFormatter+.swift
    â”‚Â Â  â”‚Â Â  â””â”€â”€ String+.swift
    â”‚Â Â  â”œâ”€â”€ Model
    â”‚Â Â  â”‚Â Â  â”œâ”€â”€ BoxOfficeEntity.swift
    â”‚Â Â  â”‚Â Â  â”œâ”€â”€ MovieDetailEntity.swift
    â”‚Â Â  â”‚Â Â  â”œâ”€â”€ DaumImageEntity.swift
    â”‚Â Â  â”‚Â Â  â”œâ”€â”€ DecodingManager.swift
    â”‚Â Â  â”‚Â Â  â”œâ”€â”€ Error.swift
    â”‚Â Â  â”‚Â Â  â”œâ”€â”€ NetworkingManager.swift
    â”‚Â Â  â”‚Â Â  â””â”€â”€ URLSessionProtocol.swift
    â”‚Â Â  â”œâ”€â”€View
    â”‚Â Â  â”‚   â”œâ”€â”€ BoxOfficeRankingListCell.swift
    â”‚Â Â  â”‚   â”œâ”€â”€ BoxOfficeRankingIconCell.swift
    â”‚Â Â  â”‚   â””â”€â”€ MovieDetailStackView.swift
    â”‚Â Â  â”œâ”€â”€ Controller
    â”‚Â Â  â”‚Â Â  â”œâ”€â”€ BoxOfficeViewController.swift
    â”‚Â Â  â”‚Â Â  â”œâ”€â”€ CalendarViewController.swift
    â”‚Â Â  â”‚Â Â  â””â”€â”€ MovieDetailViewController.swift
    â”‚Â Â  â”œâ”€â”€ Resource
    â”‚Â Â  â”‚Â Â  â”œâ”€â”€ AppDelegate.swift
    â”‚Â Â  â”‚Â Â  â”œâ”€â”€ SceneDelegate.swift
    â”‚Â Â  â”‚Â Â  â”œâ”€â”€ NetworkConfiguration.swift
    â”‚Â Â  â”‚Â Â  â”œâ”€â”€ Assets.xcassets
    â”‚Â Â  â”‚Â Â  â””â”€â”€ box_office_sample.json
    â”‚Â Â  â””â”€â”€Info.plist
    â”œâ”€â”€ BoxOffice.xcodeproj
    â”œâ”€â”€ BoxOfficeTests
    â”‚Â Â  â”œâ”€â”€ BoxOffice.xctestplan
    â”‚Â Â  â”œâ”€â”€ BoxOfficeDecodingTests.swift
    â”‚Â Â  â”œâ”€â”€ BoxOfficeNetworkingTest.swift
    â”‚Â Â  â””â”€â”€ TestDouble.swift
    â””â”€â”€ README.md

### UML
#### ë°•ìŠ¤ì˜¤í”¼ìŠ¤ í™”ë©´
<img src="https://hackmd.io/_uploads/S1FsUShn3.png"><br>

#### ì˜í™” ìƒì„¸ì •ë³´ í™”ë©´
<img src="https://hackmd.io/_uploads/SkGRUHhhh.png">
<br>

<a id="4."></a></br>
## ì‹¤í–‰ í™”ë©´

| ì˜í™” ìƒì„¸ì •ë³´ | ë‚ ì§œ ë³€ê²½ | í™”ë©´ ëª¨ë“œ ë³€ê²½ |
|:--------:|:--------:|:--------:|
|<img src="https://file.notion.so/f/s/381a37e3-8fac-46d9-988f-bc65a6b2c618/boxoffice.gif?id=07a404ad-ba68-4422-9c17-aae2e1ab04dd&table=block&spaceId=26c8d86e-7094-42a2-9751-594e7aa0a176&expirationTimestamp=1692410400000&signature=aITy02Giq1_hYjSPyupBQbBn8cwPbdCFrOtaF-0ISXI" width="250">|<img src="https://file.notion.so/f/s/6444c61f-e00c-4d42-8314-85a7259cb144/boxoffice_datechange.gif?id=a4fc2b9d-9dcf-48d6-b247-dd1df05572ff&table=block&spaceId=26c8d86e-7094-42a2-9751-594e7aa0a176&expirationTimestamp=1692410400000&signature=sMktJU4AZmvRlbZ7Ln9aHYcotN7N3ydImJ2K_LU4ypI" width="250">|<img src="https://file.notion.so/f/s/df1a49e1-c359-43d4-a782-2e759bad427d/boxoffice_modechange.gif?id=0f186811-05ed-4a04-85db-0a430761d7ae&table=block&spaceId=26c8d86e-7094-42a2-9751-594e7aa0a176&expirationTimestamp=1692410400000&signature=AhIyobnGXMb-LCQHIB0gSXFthoOh3o5QBtmhlQz2Ln0" width="250">|




<a id="5."></a></br>
## í•µì‹¬ ê²½í—˜
#### ğŸŒŸ xcconfig, info.plistë¥¼ í™œìš©í•œ api key ì„¤ì •
í™˜ê²½ íŒŒì¼ì„ í™œìš©í•´ ì›ê²© ì €ì¥ì†Œì— ê³µìœ ë˜ì§€ ì•Šì•„ì•¼ í•˜ëŠ” key ì •ë³´ë¥¼ ê´€ë¦¬í•˜ì˜€ìŠµë‹ˆë‹¤.

#### ğŸŒŸ CodingKeysì™€ Nested Type Enumì„ í™œìš©í•œ ì¤‘ì²© json íŒŒì‹±
`Nested Type`ì„ í™œìš©í•˜ì—¬ ì—¬ëŸ¬ ë‹¨ê³„ë¡œ ì¤‘ì²©ëœ í˜•íƒœì˜ jsonì„ íŒŒì‹±í•  ìˆ˜ ìˆë„ë¡ í•˜ì˜€ê³ , `CodingKeys`ë¥¼ í™œìš©í•´ ì´í•´í•˜ê¸° ì–´ë ¤ìš´ íŒŒë¼ë¯¸í„°ëª…ì„ ë³€ê²½í•˜ì˜€ìŠµë‹ˆë‹¤.
<details>
<summary>ìƒì„¸ì½”ë“œ</summary>
<div markdown="1">

```swift
extension BoxOfficeEntity {
    struct BoxOfficeResult: Decodable {
        let boxOfficeType, showRange: String
        let dailyBoxOfficeList: [DailyBoxOffice]

        enum CodingKeys: String, CodingKey {
            case boxOfficeType = "boxofficeType"
            case showRange, dailyBoxOfficeList
        }
    }
}
```
</div>
</details>

#### ğŸŒŸ Genericì„ í™œìš©í•œ ë²”ìš© ë©”ì„œë“œ êµ¬í˜„
ë‹¤ì–‘í•œ íƒ€ì…ì˜ Entityë¥¼ ë°˜í™˜í•´ì•¼ í•˜ëŠ” `DecodingManager`ì˜ ë©”ì„œë“œë¥¼ `Generic`ìœ¼ë¡œ êµ¬í˜„í•˜ì˜€ìŠµë‹ˆë‹¤.
<details>
<summary>ìƒì„¸ì½”ë“œ</summary>
<div markdown="1">

```swift
func decode<T: Decodable>(_ data: Data?) throws -> T {
    guard let data = data,
          let decodedData = try? decoder.decode(T.self, from: data) else {
        throw DecodingError.decodingFailure
    }
    return decodedData
}
```
    
</div>
</details>

#### ğŸŒŸ Modern Collection View êµ¬í˜„
`Modern Collection View`ë¥¼ í†µí•´ ë°•ìŠ¤ì˜¤í”¼ìŠ¤ ë­í‚¹ ë¦¬ìŠ¤íŠ¸ë¥¼ êµ¬í˜„í•˜ê¸° ìœ„í•˜ì—¬ `Diffable Data Source`ì™€ `Collection View List Cell`ë¥¼ í™œìš©í•˜ì˜€ìŠµë‹ˆë‹¤.
<details>
<summary>ìƒì„¸ì½”ë“œ</summary>
<div markdown="1">
    
```swift
private let collectionView: UICollectionView = {
    let configuration = UICollectionLayoutListConfiguration(appearance: .plain)
    let layout = UICollectionViewCompositionalLayout.list(using: configuration)
...
}
    
private var dataSource: UICollectionViewDiffableDataSource<NetworkNamespace, BoxOfficeEntity.BoxOfficeResult.DailyBoxOffice>?
...
    
```
    
</div>
</details>
    
#### ğŸŒŸ UICalendarView í™œìš©
`UICalendarView`ë¥¼ í™œìš©í•´ `Calendar`ë¥¼ êµ¬í˜„í•˜ê³  ê³¼ê±° ë‚ ì§œì˜ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ìˆë„ë¡ í™œìš©í•˜ì˜€ìŠµë‹ˆë‹¤.
<details>
<summary>ìƒì„¸ì½”ë“œ</summary>
<div markdown="1">
    
```swift
private let calendarView: UICalendarView = {
        var calendarView = UICalendarView()
        calendarView.translatesAutoresizingMaskIntoConstraints = false
        calendarView.backgroundColor = .systemBackground
        
        let endDate = Calendar.current.date(byAdding: .day, value: -1, to: Date()) ?? Date()
        let calendarViewDateRange = DateInterval(start: Date(timeIntervalSince1970: 0), end: endDate)
        calendarView.availableDateRange = calendarViewDateRange
        
        return calendarView
    }()
```
    
</div>
</details>
    
#### ğŸŒŸ UIActivityIndicatorViewë¥¼ í™œìš©í•œ ë¡œë”© êµ¬í˜„
ë°ì´í„° fetch ìƒíƒœì— ë”°ë¼ `UIActivityIndicatorView`ì˜ ìƒíƒœê°’ì„ ë³€ê²½í•˜ì—¬ ë¡œë”© ë§ˆí¬ê°€ í™œì„±í™”/ë¹„í™œì„±í™” ë˜ë„ë¡ êµ¬í˜„í•˜ì˜€ìŠµë‹ˆë‹¤.
<details>
<summary>ìƒì„¸ì½”ë“œ</summary>
<div markdown="1">
    
```swift
private let indicatorView: UIActivityIndicatorView = {
    let indicatorView = UIActivityIndicatorView()
    indicatorView.style = .large
    indicatorView.translatesAutoresizingMaskIntoConstraints = false

    return indicatorView
}()

private var isLoading: Bool = true {
    willSet(newValue) {
        if newValue == true {
            indicatorView.isHidden = false
            indicatorView.startAnimating()
        } else {
            indicatorView.isHidden = true
            indicatorView.stopAnimating()
        }
    }
}
```
    
</div>
</details>

#### ğŸŒŸ UIRefreshControlë¥¼ í™œìš©í•œ ìƒˆë¡œê³ ì¹¨ êµ¬í˜„
`Collection View`ì— `UIRefreshColtrol` ê°ì²´ë¥¼ ì¶”ê°€í•˜ì—¬, ì•„ë˜ë¡œ ë‹¹ê²¼ì„ ë•Œ ìƒˆë¡œê³ ì¹¨ì„ ì§„í–‰í•  ìˆ˜ ìˆë„ë¡ í•˜ì˜€ìŠµë‹ˆë‹¤.
<details>
<summary>ìƒì„¸ì½”ë“œ</summary>
<div markdown="1">
    
```swift
collectionView.refreshControl = refreshControl
    refreshControl.addTarget(self, action: #selector(refresh), for: .valueChanged)
```
    
</div>
</details>
    
#### ğŸŒŸ UIToolBar í™œìš©
`UIToolBar`ì™€ `flexibleSpace`ë¥¼ í™œìš©í•˜ì—¬ í™”ë©´ í•˜ë‹¨ ë²„íŠ¼ì„ êµ¬í˜„í•˜ì˜€ìŠµë‹ˆë‹¤.
    
<details>
<summary>ìƒì„¸ì½”ë“œ</summary>
<div markdown="1">
    
```swift
let modeChangeButton = UIBarButtonItem(title: "í™”ë©´ ëª¨ë“œ ë³€ê²½", style: .plain, target: self, action: #selector(hitChangeModeButton))
let flexibleSpace = UIBarButtonItem(barButtonSystemItem: .flexibleSpace, target: self, action: nil)
...
self.toolbarItems = [flexibleSpace, modeChangeButton, flexibleSpace]
```
    
</div>
</details>

#### ğŸŒŸ UIAlertController í™œìš©
í™”ë©´ ëª¨ë“œ ë³€ê²½ì‹œ `UIAlertController`ì˜ `actionSheet`ìŠ¤íƒ€ì¼ë¡œ ì•„ì´ì½˜ ëª¨ë“œì™€ ë¦¬ìŠ¤íŠ¸ ëª¨ë“œ í™”ë©´ì„ ì„ íƒì ìœ¼ë¡œ ì ìš©í•  ìˆ˜ ìˆë„ë¡ êµ¬í˜„í•˜ì˜€ìŠµë‹ˆë‹¤.
<details>
<summary>ìƒì„¸ì½”ë“œ</summary>
<div markdown="1">
    
```swift
@objc func hitChangeModeButton() {
    let mode: String = isListMode == true ? "ì•„ì´ì½˜" : "ë¦¬ìŠ¤íŠ¸"
    let alert = UIAlertController(title: "í™”ë©´ ëª¨ë“œ ë³€ê²½", message: nil, preferredStyle: .actionSheet)
    let modeChangeAction = UIAlertAction(title: mode, style: .default) { _ in
        self.isListMode.toggle()
    }
    let cancelAction = UIAlertAction(title: "ì·¨ì†Œ", style: .cancel)
        
    alert.addAction(modeChangeAction)
    alert.addAction(cancelAction)
    present(alert, animated: true)
}
```
    
</div>
</details>
    

#### ğŸŒŸ Attributed String í™œìš©
í•˜ë‚˜ì˜ ë ˆì´ë¸” ì•ˆì—ì„œ ì—¬ëŸ¬ ê°€ì§€ ìƒ‰ìƒì„ í‘œì‹œí•˜ê¸° ìœ„í•˜ì—¬ `Attributed String`ì„ í™œìš©í•˜ì˜€ìŠµë‹ˆë‹¤.
<details>
<summary>ìƒì„¸ì½”ë“œ</summary>
<div markdown="1">
    
```swift
attributedString.addAttribute(.foregroundColor, value: UIColor.systemRed, range: (fixedIntensity as NSString).range(of: "â–²"))
```
    
</div>
</details>

#### ğŸŒŸ DynamicType ì ìš©
`preferredFont`ë¥¼ í™œìš©í•˜ì—¬ í°íŠ¸ì— `DynamicType`ì„ ì ìš©í•˜ì˜€ê³ , `adjustsFontSizeToFitWidth` ì„¤ì •ì„ í†µí•´ ê°€ë¡œ ë„ˆë¹„ì— ë§ì¶° í…ìŠ¤íŠ¸ í¬ê¸°ë¥¼ ìë™ ì¡°ì ˆí•  ìˆ˜ ìˆë„ë¡ êµ¬í˜„í•˜ì˜€ìŠµë‹ˆë‹¤.
<details>
<summary>ìƒì„¸ì½”ë“œ</summary>
<div markdown="1">
    
```swift
private let audienceLabel: UILabel = {
    let label = UILabel()
    label.font = .preferredFont(forTextStyle: .body)
    label.translatesAutoresizingMaskIntoConstraints = false
    label.adjustsFontForContentSizeCategory = true
    label.adjustsFontSizeToFitWidth = true

    return label
}()
```
    
</div>
</details>

<a id="6."></a></br>
## íŠ¸ëŸ¬ë¸” ìŠˆíŒ…
### 1ï¸âƒ£ ë„¤íŠ¸ì›Œí¬ ì—°ê²°ì‹œ URL ì „ë‹¬ ë°©ì‹
**ğŸš¨ ë¬¸ì œì **</br>
ê¸°ì¡´ì—ëŠ” `dataTask` ë©”ì„œë“œì— `URL` íƒ€ì…ì„ ì „ë‹¬í•˜ì—¬ ë„¤íŠ¸ì›Œí¬ ì—°ê²°ì„ ì§„í–‰í•˜ë„ë¡ êµ¬í˜„í–ˆì—ˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ ì´ë²ˆì— `Daum API`ê°€ ì¶”ê°€ë˜ë©´ì„œ `Authorization` í—¤ë”ë¥¼ ì¶”ê°€í•´ì•¼ í–ˆê¸° ë•Œë¬¸ì— í•´ë‹¹ ì •ë³´ë¥¼ ì–´ë–»ê²Œ ì „ë‹¬í• ì§€ ê³ ë¯¼í•˜ì˜€ìŠµë‹ˆë‹¤.

**ğŸ’¡ í•´ê²° ë°©ë²•**</br>
`URLRequest`ë¥¼ í™œìš©í•˜ë©´ `setValue`ë¥¼ í†µí•´ í—¤ë” ì •ë³´ë¥¼ ì¶”ê°€í•  ìˆ˜ ìˆìŒì„ í™•ì¸í•˜ì˜€ìŠµë‹ˆë‹¤. ì´ì— ë”°ë¼ ê¸°ì¡´ í…ŒìŠ¤íŠ¸ë”ë¸” ë° í…ŒìŠ¤íŠ¸ì½”ë“œ ëª¨ë‘ `URLRequest`ì— ë§ê²Œ ìˆ˜ì •ì„ ì§„í–‰í•˜ì˜€ìŠµë‹ˆë‹¤.

```swift
var request = URLRequest(url: url)
request.setValue("KakaoAK \(NetworkNamespace.daumApiKey)", forHTTPHeaderField: "Authorization")
```

ë˜í•œ `Daum API`ì— ì „ë‹¬í•  ì¿¼ë¦¬ ë‚´ìš©ì—ëŠ” ë„ì–´ì“°ê¸°ê°€ ì¶”ê°€ë˜ì–´ ìˆì–´, `URL`ì— ë¶™ì—¬ì„œ ë³´ë‚´ê¸°ë³´ë‹¤ëŠ” `URLComponents`ë¥¼ ì‚¬ìš©í•´ í•„ìš”í•œ ì¿¼ë¦¬ ì•„ì´í…œì„ ì¶”ê°€í•˜ëŠ” ê²Œ ì¢‹ê² ë‹¤ëŠ” ìƒê°ì´ ë“¤ì—ˆìŠµë‹ˆë‹¤.
í•´ë‹¹ ë‚´ìš©ì€ ì•„ë˜ì™€ ê°™ì´ êµ¬í˜„í•˜ì˜€ìŠµë‹ˆë‹¤.
```swift
var urlComponents = URLComponents(string: NetworkNamespace.daumImage.url)
urlComponents?.queryItems = [URLQueryItem(name: "query", value: "\(movieName) ì˜í™” í¬ìŠ¤í„°")]
```

### 2ï¸âƒ£ dataTask ë©”ì„œë“œë¡œ ë°›ì•„ì˜¨ ë°ì´í„° ì²˜ë¦¬
**ğŸš¨ ë¬¸ì œì **</br>
`NetworkingManager`ì˜ `load()` ë©”ì„œë“œë¥¼ í˜¸ì¶œí•œ ìœ„ì¹˜ì—ì„œ `dataTask`ë¥¼ í†µí•´ ë°›ì•„ ì˜¨ ë°ì´í„°ë¥¼ í™œìš©í•  ìˆ˜ ìˆëŠ” ë°©ë²•ì— ëŒ€í•´ ê³ ë¯¼ì´ ìˆì—ˆìŠµë‹ˆë‹¤.
ì²˜ìŒì—ëŠ” ë‘ íƒ€ì…ì„ ë¸ë¦¬ê²Œì´íŠ¸ë¡œ ì—°ê²°í•˜ì—¬ ì „ë‹¬í•˜ëŠ” ë“±ì˜ ë°©ë²•ì„ ìƒê°í–ˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ ë°ì´í„° ì²˜ë¦¬ë¥¼ ìœ„í•´ ë„¤íŠ¸ì›Œí‚¹ì„ ì‚¬ìš©í•˜ëŠ” ëª¨ë“  íƒ€ì…ì„ ë¸ë¦¬ê²Œì´íŠ¸ë¡œ ì—°ê²°í•˜ëŠ” ê²ƒì€ ê¶Œì¥ë˜ëŠ” ë°©ì‹ë„ ì•„ë‹ˆê³ , íš¨ìœ¨ì ì´ì§€ ëª»í•œ ê²ƒ ê°™ì•˜ìŠµë‹ˆë‹¤.

**ğŸ’¡ í•´ê²° ë°©ë²•**</br>
`@escaping` í´ë¡œì €ì™€ `Result`íƒ€ì…ì„ í™œìš©í•˜ì—¬ í•´ê²°í•˜ì˜€ìŠµë‹ˆë‹¤. `Result`ëŠ” ì„±ê³µ/ì‹¤íŒ¨ ë‘ ê°€ì§€ ê°€ëŠ¥ì„±ì— ëŒ€í•œ ë°ì´í„°íƒ€ì…ì„ ë”°ë¡œ ì§€ì •í•´ì¤„ ìˆ˜ ìˆì–´ `CompletionHandler`ì— í™œìš©í•˜ê¸°ì— ì ì ˆí•˜ë‹¤ê³  íŒë‹¨í–ˆìŠµë‹ˆë‹¤.
```swift
func load(_ urlString: String, completion: @escaping (Result<Data, BoxOfficeError>) -> Void) {
    guard let url = URL(string: urlString) else {
        return
    }

    let task = session.dataTask(with: url) { data, response, error in
        if error != nil {
            completion(.failure(BoxOfficeError.connectionFailure))
            return
        }
        ...
```

### 3ï¸âƒ£ ATSë¥¼ í†µí•œ ë„¤íŠ¸ì›Œí¬ ì„¤ì •
**ğŸš¨ ë¬¸ì œì **</br>
APIë¥¼ ë°›ì•„ì™€ì•¼ í•˜ëŠ” ë„ë©”ì¸ì´ `https`ê°€ ì•„ë‹Œ `http`ë¥¼ í™œìš©í•˜ê³  ìˆì–´ ë„¤íŠ¸ì›Œí¬ ì—°ê²°ì‹œì— ì˜¤ë¥˜ê°€ ë°œìƒí•˜ì˜€ìŠµë‹ˆë‹¤.</br>
<img src="https://hackmd.io/_uploads/BkwWly-jn.png"></br>

**ğŸ’¡ í•´ê²° ë°©ë²•**</br>
í•´ë‹¹ ë„ë©”ì¸ ë° í•˜ìœ„ ë„ë©”ì¸ ì •ë³´ë¥¼ ATSì— `Exception Domains`ë¡œ ì¶”ê°€í•˜ì—¬ ì •ìƒì ìœ¼ë¡œ ë„¤íŠ¸ì›Œí‚¹ì´ ê°€ëŠ¥í•˜ë„ë¡ êµ¬í˜„í•˜ì˜€ìŠµë‹ˆë‹¤.</br>
<img src="https://hackmd.io/_uploads/Hkj4Tsgjh.png"></br>

### 4ï¸âƒ£ ë¡œë”©ê³¼ ìƒˆë¡œê³ ì¹¨ ì¢…ë£Œ ìœ„ì¹˜ ì„¤ì •
**ğŸš¨ ë¬¸ì œì **</br>
ë„¤íŠ¸ì›Œí‚¹ì„ í†µí•´ ë°›ì•„ ì˜¨ ë°ì´í„°ë¥¼ ì²˜ë¦¬í•˜ëŠ” ê³¼ì •ì—ì„œ ì„±ê³µí•œ ê²½ìš°ì—ë§Œ ë¡œë”©ì„ ëë‚´ê³  ë¹ ì ¸ë‚˜ê°ˆ ìˆ˜ ìˆë„ë¡ ì²˜ë¦¬í•˜ì˜€ë”ë‹ˆ, ì—ëŸ¬ê°€ ë‚¬ì„ ë•ŒëŠ” ì•„ë˜ì™€ ê°™ì´ ê³„ì† ë¡œë”©ì´ ëŒì•„ê°€ê³  ìˆëŠ” ê²ƒì²˜ëŸ¼ ë³´ì´ëŠ” ê²ƒì„ í™•ì¸í–ˆìŠµë‹ˆë‹¤.</br>
<img src="https://hackmd.io/_uploads/HkMVV0Yon.png" width="200"></br>
ë˜í•œ RefreshControlì˜ ì¢…ë£Œ ì²˜ë¦¬ë¥¼ ì•„ë˜ì™€ ê°™ì´ ì§„í–‰í•˜ë‹ˆ, ë°ì´í„° ë¡œë”©ì´ ì™„ë£Œë˜ê¸° ì „ì— ë¹„ë™ê¸°ë¡œ ë‹¤ìŒ í˜¸ì¶œì´ ì§„í–‰ë˜ì–´ ìƒˆë¡œê³ ì¹¨ì´ ë°”ë¡œ ëë‚˜ë²„ë¦¬ëŠ” ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.
```swift
@objc private func refresh() {
    passFetchedData()
    refreshControl.endRefreshing()
}
```

**ğŸ’¡ í•´ê²° ë°©ë²•**</br>
ë„¤íŠ¸ì›Œí‚¹ê³¼ ë””ì½”ë”© ì—¬ë¶€ì— ìƒê´€ì—†ì´ ë¡œë”©ê³¼ ìƒˆë¡œê³ ì¹¨ì„ ì™„ë£Œí•  ìˆ˜ ìˆë„ë¡ í•´ë‹¹ í˜¸ì¶œë¶€ë¥¼ switchë¬¸ ë°–ìœ¼ë¡œ ì´ë™í•˜ì˜€ìœ¼ë©°,
isLoading ë³€ìˆ˜ê°€ falseì¼ ë•Œ endRefreshingë„ í˜¸ì¶œí•  ìˆ˜ ìˆë„ë¡ ë³€ê²½í•´ì£¼ì—ˆìŠµë‹ˆë‹¤.
```swift
networkingManager?.load(url) { [weak self] (result: Result<Data, NetworkingError>) in
    switch result {
    case .success(let data):
        ...
    case .failure(let error):
        ...
}

DispatchQueue.main.async {
    self?.isLoading = false
    self?.refreshControl.endRefreshing()
}
```

### 5ï¸âƒ£ ì…€ ì¬í™œìš©ìœ¼ë¡œ ì¸í•œ ë¬¸ì œ í•´ê²°
**ğŸš¨ ë¬¸ì œì **</br>
Collection Viewì—ì„œ ì…€ì„ ì¬ì‚¬ìš©í•˜ë©´ì„œ, ê²€ì€ ìƒ‰ìœ¼ë¡œ ë“¤ì–´ê°€ì•¼ í•˜ëŠ” ìˆœìœ„ í…ìŠ¤íŠ¸ê°€ ë¹¨ê°„ìƒ‰ìœ¼ë¡œ ì˜ëª» ë“¤ì–´ê°€ëŠ” ë¬¸ì œê°€ ìˆì—ˆìŠµë‹ˆë‹¤.
<img src="https://hackmd.io/_uploads/HkS1_Shhh.png" width="300"></br>
**ğŸ’¡ í•´ê²° ë°©ë²•**</br>
`PrepareForReuse()`ë¥¼ í†µí•´ ì•„ë˜ì™€ ê°™ì´ í°íŠ¸ ìƒ‰ìƒì„ ì´ˆê¸°í™”í•´ ì£¼ì—ˆìŠµë‹ˆë‹¤.
```swift
override func prepareForReuse() {
    rankIntensityLabel.textColor = .black
}
```
### 6ï¸âƒ£ Test Double ìƒì„±
**ğŸš¨ ë¬¸ì œì **</br>
ì¸í„°ë„· ì—°ê²°ì´ ì—†ëŠ” ìƒíƒœì—ì„œ ë„¤íŠ¸ì›Œí¬ í†µì‹ ì„ í…ŒìŠ¤íŠ¸í•˜ê¸° ìœ„í•´ `Test Double`ì„ ìƒì„±í•˜ì˜€ìŠµë‹ˆë‹¤. ì´ ê³¼ì •ì—ì„œ í…ŒìŠ¤íŠ¸ìš© `Stub Session`ê³¼ ì‹¤ì œ `Session` ì‚¬ì´ì— í˜¸í™˜ì´ ê°€ëŠ¥í•˜ë„ë¡ í•˜ê¸° ìœ„í•´ `URLSessionProtocol`ì„ êµ¬í˜„í•˜ì˜€ëŠ”ë°, `URLSession`ì—ì„œ ì´ë¥¼ ìƒì†í•˜ë ¤ í•˜ë‹ˆ ì•„ë˜ì™€ ê°™ì€ ê²½ê³ ê°€ ë°œìƒí•˜ì˜€ìŠµë‹ˆë‹¤.</br>
<img src="https://hackmd.io/_uploads/BJeZG3lin.png" width="1000"></br>

**ğŸ’¡ í•´ê²° ë°©ë²•**</br>
`CompletionHandler typealias`ì— `@Sendable`ì„ ì±„íƒí•˜ì—¬ í•´ê²°í•˜ì˜€ìŠµë‹ˆë‹¤.
```swift
typealias CompletionHandler = @Sendable (Data?, URLResponse?, Error?) -> Void
```


### 7ï¸âƒ£ ë‹¤ì–‘í•œ ë„¤íŠ¸ì›Œí¬ì— ëŒ€í•œ Test í™˜ê²½ êµ¬ì„± 
**ğŸš¨ ë¬¸ì œì **</br>
ì„¸ ê°€ì§€ ë‹¤ë¥¸ APIë¥¼ í˜¸ì¶œí•˜ëŠ” í”„ë¡œê·¸ë¨ì´ë‹¤ ë³´ë‹ˆ, ê° API ë‚´ìš©ì— ë”°ë¼ ë§¤ë²ˆ ìƒˆë¡œìš´ í…ŒìŠ¤íŠ¸ í™˜ê²½ì„ ë§Œë“¤ì–´ì£¼ì–´ì•¼ í•´ì„œ ë²ˆê±°ë¡œì› ìŠµë‹ˆë‹¤.

**ğŸ’¡ í•´ê²° ë°©ë²•**</br>
ì•„ë˜ì™€ ê°™ì´ í…ŒìŠ¤íŠ¸ íƒ€ì…ì„ íŒŒë¼ë¯¸í„°ë¡œ ì „ë‹¬ë°›ì•„ ê° íƒ€ì…ì— ë§ëŠ” í…ŒìŠ¤íŠ¸í™˜ê²½ì„ êµ¬ì„±í•  ìˆ˜ ìˆë„ë¡ êµ¬í˜„í•˜ì˜€ìŠµë‹ˆë‹¤. 
```swift
func setUpSUT(isSuccess: Bool, apiType: NetworkNamespace) {
    ...
        switch apiType {
    case .boxOffice:
        urlString = String(format: NetworkNamespace.boxOffice.url, NetworkNamespace.apiKey, "20230801")
        asset = "box_office_sample"
    case .movieDetail:
        urlString = String(format: NetworkNamespace.movieDetail.url, NetworkNamespace.apiKey, "20230801")
        asset = "movie_detail_sample"
    case .daumImage:
        urlString = String(format: NetworkNamespace.daumImage.url)
        asset = "daum_image_sample"
    }
    ...

    if isSuccess {
        ...
        let response = HTTPURLResponse(url: url, statusCode: 200, httpVersion: nil, headerFields: nil)
        ...
    } else {
        let response = HTTPURLResponse(url: url, statusCode: 400, httpVersion: nil, headerFields: nil)
        ...
    }
}
```

<a id="7."></a></br>
## ì°¸ê³  ìë£Œ
- [URLSession ê³µì‹ë¬¸ì„œ ğŸ](https://developer.apple.com/documentation/foundation/urlsession)
- [Fetching Website Data into Memory ê³µì‹ë¬¸ì„œ ğŸ](https://developer.apple.com/documentation/foundation/url_loading_system/fetching_website_data_into_memory)
- [UICollectionView ê³µì‹ë¬¸ì„œ ğŸ](https://developer.apple.com/documentation/uikit/uicollectionview)
- [UICollectionViewListCell ê³µì‹ë¬¸ì„œ ğŸ](https://developer.apple.com/documentation/uikit/uicollectionviewlistcell)
- [UICollectionViewDiffableDataSource ê³µì‹ë¬¸ì„œ ğŸ](https://developer.apple.com/documentation/uikit/uicollectionviewdiffabledatasource)
- [URLRequest ê³µì‹ë¬¸ì„œ ğŸ](https://developer.apple.com/documentation/foundation/urlrequest)
- [URLComponents ê³µì‹ë¬¸ì„œ ğŸ](https://developer.apple.com/documentation/foundation/urlcomponents)
- [AttributedString ê³µì‹ë¬¸ì„œ ğŸ](https://developer.apple.com/documentation/foundation/attributedstring)
- [UIRefreshControl ê³µì‹ë¬¸ì„œ ğŸ](https://developer.apple.com/documentation/uikit/uirefreshcontrol)
- [UIActivityIndicatorView ê³µì‹ë¬¸ì„œ ğŸ](https://developer.apple.com/documentation/uikit/uiactivityindicatorview)
- [UICalendarView ê³µì‹ë¬¸ì„œ ğŸ](https://developer.apple.com/documentation/uikit/uicalendarview)
- [UIAlertController ê³µì‹ë¬¸ì„œ ğŸ](https://developer.apple.com/documentation/uikit/uialertcontroller)
- [ì•¼ê³° ë‹·ë„· - Unit Test](https://yagom.net/courses/unit-test-%ec%9e%91%ec%84%b1%ed%95%98%ea%b8%b0/)
</br>

<a id="8."></a></br>
## íŒ€ íšŒê³ 
[ì¼ì¼ ìŠ¤í¬ëŸ¼](https://github.com/iOS-Yetti/ios-box-office/wiki)

</br>
