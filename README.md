# ğŸ¥ ë°•ìŠ¤ì˜¤í”¼ìŠ¤ ğŸ¿

## ğŸ“– ëª©ì°¨

1. [ğŸ“¢ ì†Œê°œ](#1.)
2. [ğŸ‘¤ íŒ€ì›](#2.)
3. [â±ï¸ íƒ€ì„ë¼ì¸](#3.)
4. [ğŸ“Š UML & íŒŒì¼íŠ¸ë¦¬](#4.)
5. [ğŸ“± ì‹¤í–‰ í™”ë©´](#5.)
6. [ğŸ§¨ íŠ¸ëŸ¬ë¸” ìŠˆíŒ…](#6.)
7. [ğŸ”— ì°¸ê³  ë§í¬](#7.)

<br>

<a id="1."></a>

## 1. ğŸ“¢ ì†Œê°œ
`ì¼ë³„ ë°•ìŠ¤ì˜¤í”¼ìŠ¤ API`ë¥¼ ì´ìš©í•´ì„œ ë°•ìŠ¤ì˜¤í”¼ìŠ¤ ì •ë³´ë¥¼ ë°›ì•„ì˜¤ê³  ì›í•˜ëŠ” ì˜í™”ì˜ ì •ë³´ë¥¼ ë³´ì—¬ë“œë¦½ë‹ˆë‹¤!

> **í•µì‹¬ ê°œë… ë° ê²½í—˜**
> 
> - **Networking**
>   - `URLSession`ì„ ì´ìš©í•œ ë„¤íŠ¸ì›Œí‚¹
> - **TestDouble**
>   - `TestDouble` ê°ì²´ë¥¼ ì´ìš©í•˜ì—¬ ë„¤íŠ¸ì›Œí¬ê°€ ì—°ê²°ë˜ì–´ ìˆì§€ ì•Šì€ ê²½ìš°ì—ë„ í…ŒìŠ¤íŠ¸
> - **DTO**
>   - `JSON` ë°ì´í„°ë¥¼ ë””ì½”ë”©í•  `DTO` ê°ì²´ êµ¬í˜„
>     - ì‚¬ìš©í•  ë°ì´í„°ë§Œìœ¼ë¡œ ì´ë£¨ì–´ì§„ `Entity` ê°ì²´ êµ¬í˜„
> - **CollectionView**
>   - `CollectionView`ë¥¼ í™œìš©í•œ UIêµ¬í˜„
> - **MVC**
>   - `MVC`íŒ¨í„´ì„ í™œìš©í•˜ì—¬ ê°ì²´ë¥¼ ì—­í• ì— ì•Œë§ê²Œ ë¶„ë¦¬í•˜ì—¬ í”„ë¡œì íŠ¸ êµ¬í˜„

<br>

<a id="2."></a>

## 2. ğŸ‘¤ íŒ€ì›

| [kyungmin ğŸ¼](https://github.com/YaRkyungmin) | [Erick ğŸ¶](https://github.com/h-suo) |
| :--------: | :--------: | 
| <Img src = "https://cdn.discordapp.com/attachments/1100965172086046891/1108927085713563708/admin.jpeg" width="350"/>| <Img src = "https://user-images.githubusercontent.com/109963294/235300758-fe15d3c5-e312-41dd-a9dd-d61e0ab354cf.png" width="350"/>|

<br>

<a id="3."></a>
## 3. â±ï¸ íƒ€ì„ë¼ì¸

> í”„ë¡œì íŠ¸ ê¸°ê°„ :  2023.07.24 ~ 2023.08.04

|ë‚ ì§œ|ë‚´ìš©|
|:---:|---|
| **2023.07.24** |â–«ï¸ `JSON` ë°ì´í„°ë¥¼ ë””ì½”ë”©í•  `Entity` ê°ì²´ êµ¬í˜„ <br>|
| **2023.07.25** |â–«ï¸ ì½”ë“œ ê°œì„ ì„ ìœ„í•œ ë¦¬í™í† ë§ <br> |
| **2023.07.26** |â–«ï¸ ë„¤íŠ¸ì›Œí‚¹ ì‘ì—…ì„ í•  `NetworkManager` êµ¬í˜„ <br>|
| **2023.07.27** |â–«ï¸ `TestDouble`ì„ ì´ìš©í•œ í…ŒìŠ¤íŠ¸ ìƒì„± <br> |
| **2023.07.28** |â–«ï¸ ì½”ë“œ ê°œì„ ì„ ìœ„í•œ ë¦¬í™í† ë§ <br> â–«ï¸ README ì‘ì„± <br>|
| **2023.07.31** |â–«ï¸ `CollectionViewCell` êµ¬í˜„ <br>|
| **2023.08.01** |â–«ï¸ `CollectionView`ë¡œ UI êµ¬í˜„ <br> â–«ï¸ `BoxOffice`ì˜ ë°ì´í„°ë¥¼ ê°€ì ¸ì™€ ê´€ë¦¬í•˜ëŠ” `BoxOfficeManager`êµ¬í˜„ <br> â–«ï¸ ì‹¤ì œ ì‚¬ìš©í•  ë°ì´í„°ë§Œìœ¼ë¡œ ì´ë£¨ì–´ì§„ `Entity` ê°ì²´ `DailyBoxOffice` êµ¬í˜„ <br> â–«ï¸ `refreshControl`ì„ ì´ìš©í•œ ë°ì´í„° ë¦¬ë¡œë“œ ë¡œì§ êµ¬í˜„ <br>|
| **2023.08.02** |â–«ï¸ ë°ì´í„° ë¡œë“œì— ì‹¤íŒ¨í–ˆì„ ë•Œ `Alert`ê°€ ëœ¨ë„ë¡ êµ¬í˜„ <br>|
| **2023.08.03** |â–«ï¸ ì½”ë“œ ê°œì„ ì„ ìœ„í•œ ë¦¬í™í† ë§ <br> |
| **2023.08.04** |â–«ï¸ ì½”ë“œ ê°œì„ ì„ ìœ„í•œ ë¦¬í™í† ë§ <br> â–«ï¸ README ì‘ì„± <br>|

<br>

<a id="4."></a>
## 4. ğŸ“Š UML & íŒŒì¼íŠ¸ë¦¬

### UML

<Img src = "https://hackmd.io/_uploads/Hy3VRfqs3.png" width=""/>

<br>

### íŒŒì¼íŠ¸ë¦¬
```
â”œâ”€â”€ App
â”‚Â Â  â”œâ”€â”€ AppDelegate.swift
â”‚Â Â  â””â”€â”€ SceneDelegate.swift
â”œâ”€â”€ NetWork
â”‚Â Â  â””â”€â”€ NetworkManager.swift
â”œâ”€â”€ Model
â”‚Â Â  â”œâ”€â”€ BoxOfficeManager.swift
â”‚Â Â  â”œâ”€â”€ DTO
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ BoxOffice.swift
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ Entity
â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ DailyBoxOffice.swift
â”‚Â Â  â”‚Â Â  â””â”€â”€ Movie.swift
â”‚Â Â  â”œâ”€â”€ DataManager.swift
â”‚Â Â  â””â”€â”€ TestDouble
â”‚Â Â      â”œâ”€â”€ StubURLSession.swift
â”‚Â Â      â””â”€â”€ URLSessionProtocol.swift
â”œâ”€â”€ Controller
â”‚Â Â  â””â”€â”€ BoxOfficeViewController.swift
â”œâ”€â”€ View
â”‚    â””â”€â”€ BoxOfficeCollectionViewCell.swift
â”œâ”€â”€ Extension
â”‚Â Â  â”œâ”€â”€ DateFormatter+.swift
â”‚Â Â  â”œâ”€â”€ NumberFormatter+.swift
â”‚Â Â  â”œâ”€â”€ UIAlertController+.swift
â”‚Â Â  â”œâ”€â”€ UILabel+.swift
â”‚Â Â  â”œâ”€â”€ URL+.swift
â”‚Â Â  â””â”€â”€ URLSession+.swift
â”œâ”€â”€ Error
â”‚Â Â  â”œâ”€â”€ DataError.swift
â”‚Â Â  â””â”€â”€ NetworkError.swift
â””â”€â”€ Util
 Â Â  â””â”€â”€ Path.swift
```

<br>

<a id="5."></a>
## 5. ğŸ“± ì‹¤í–‰ í™”ë©´
| ë°•ìŠ¤ì˜¤í”¼ìŠ¤ ë°ì´í„° ë¡œë“œ | í™”ë©´ì„ ë‹¹ê²¨ ë°ì´í„° ë¦¬ë¡œë“œ | ë°ì´í„° ë¡œë“œì— ì‹¤íŒ¨í–ˆì„ ë•Œ ì•Œë¦¼í™”ë©´ |
| :--------------: | :-------: |  :-------: | 
| <Img src = "https://hackmd.io/_uploads/BJdHyz9i3.gif" width="225"/> | <Img src = "https://hackmd.io/_uploads/ByZ1xfqi2.gif" width="225"/>  | <Img src = "https://hackmd.io/_uploads/H12xlf5jn.gif" width="225"/> |

<br>

<a id="6."></a>
## 6. ğŸ§¨ íŠ¸ëŸ¬ë¸” ìŠˆíŒ…
### 1ï¸âƒ£  ê°ì²´ ë¶„ë¦¬

#### ğŸ”¥ ë¬¸ì œì 
`Controller`ë‚˜ í•˜ë‚˜ì˜ `Model`ì—ì„œ ë§ì€ ë¡œì§ì„ ì²˜ë¦¬í•˜ëŠ” ê²ƒë³´ë‹¨ ìì‹ ì˜ ì—­í• ì„ ê°€ì§„ ê°ì²´ë“¤ì„ ì˜ êµ¬í˜„í•˜ì—¬ í•„ìš”í• ë•Œë§Œ ë¶ˆëŸ¬ ì‚¬ìš©í•œë‹¤ë©´ ê°ì²´ê°„ì˜ ì˜ì¡´ë„ ë‚®ì¶”ê³  ì½”ë“œë¥¼ ì¬ì‚¬ìš©í•˜ëŠ” ì¸¡ë©´ì— ì¢‹ì„ ê²ƒ ê°™ì•„ ê°ì²´ ë¶„ë¦¬ì— ëŒ€í•œ ê³ ë¯¼ì„ ë§ì´ í–ˆìŠµë‹ˆë‹¤.

#### ğŸ§¯ í•´ê²°ë°©ë²•
ë‹¤ìŒê³¼ ê°™ì´ ìì‹ ì˜ ì—­í• ì„ ê°€ì§„ ê°ì²´ë¥¼ ë§Œë“¤ì–´ í”„ë¡œì íŠ¸ë¥¼ êµ¬í˜„í•˜ì˜€ìŠµë‹ˆë‹¤.

> - **DTO** : ì„œë²„ë¡œë¶€í„° ë°›ì€ `Data`ë¥¼ `Decode`í• ë•Œ ì“°ëŠ” íƒ€ì…
> - **Entity** : ì‹¤ì œ `App`ì—ì„œ ì‚¬ìš©í•  `Data` íƒ€ì…
> - **DataManager** : `DTO`ë¥¼ `Entity`ë¡œ ë³€í™˜í•´ì£¼ëŠ” ì—­í™œ
> - **NetworkManager** : ì„œë²„ë¡œë¶€í„° `Data`ë¥¼ ë°›ì•„ì˜¤ëŠ” ì—­í• 
> - **BoxOfficeManager** : `Controller`ì—ì„œ í•„ìš”í•œ ë°ì´í„°ë¥¼ ë°›ì•„ ê´€ë¦¬í•˜ëŠ” íƒ€ì…,
> - **Extension**
>   - URL : `URL`ì„ ìƒì„±í•˜ëŠ” `kobisURL`ë©”ì„œë“œ ì¶”ê°€
>   - UILabel : `attributedText`ì˜ ë¶€ë¶„ ìƒ‰ì„ ë³€ê²½í•´ì£¼ëŠ” `convertColor`ë©”ì„œë“œ ì¶”ê°€
>   - UIAlertController : í•˜ë‚˜ì˜ ì•¡ì…˜ì„ ê°€ì§„ ê¸°ë³¸ì ì¸ `alert`ì„ ë°˜í™˜í•˜ëŠ” `errorAlert` ë©”ì„œë“œ ì¶”ê°€
>   - DateFormatter : ì˜¤ëŠ˜ë¡œë¶€í„° ì›í•˜ëŠ” ë§Œí¼ ë–¨ì–´ì§„ ë‚ ì§œë¥¼ ì›í•˜ëŠ” í¬ë©§ìœ¼ë¡œ ë°˜í™˜í•˜ëŠ” `dateString` ë©”ì„œë“œ ì¶”ê°€
>   - NumberFormatter : ìˆ«ìë¡œ ì´ë£¨ì–´ì§„ `String`ì„ ë°›ì•„ `Decimal`ìŠ¤íƒ€ì¼ë¡œ í¬ë©§í•´ì£¼ëŠ” `decimalString` ë©”ì„œë“œ ì¶”ê°€

<br>

### 2ï¸âƒ£ Closure Capture

#### ğŸ”¥ ë¬¸ì œì 
`BoxOfficeManager`ì˜ `fetchBoxOffice`ì—ì„œ `requestData`ë¡œ ë„¤íŠ¸ì›Œí‚¹ì„í•˜ì—¬ ë°ì´í„°ë¥¼ ë°›ì•„ì˜¤ëŠ” ë¡œì§ì— í´ë¡œì ¸ ë‚´ì—ì„œ `BoxOfficeManager`ì˜ í”„ë¡œí¼í‹°ì¸ `dailyBoxOffices`ë¡œ ì ‘ê·¼í•˜ì—¬ í”„ë¡œí¼í‹°ë¥¼ ë³€ê²½í•˜ëŠ” ë¡œì§ì´ ìˆì—ˆìŠµë‹ˆë‹¤. 
ì´ë•Œ í´ë¡œì ¸ê°€ `self`ë¥¼ ìº¡ì³í•˜ë©´ì„œ `RC`ê°€ ì˜¬ë¼ê°€ ë©”ëª¨ë¦¬ í•´ì œê°€ ì•ˆë˜ëŠ” ê°•í•œì°¸ì¡°ìˆœí™˜ì´ ë°œìƒí•  ìˆ˜ ìˆë‹¤ëŠ” ë¬¸ì œê°€ ìˆì—ˆìŠµë‹ˆë‹¤.

```swift
final class BoxOfficeManager {
    private(set) var dailyBoxOffices: [DailyBoxOffice] = []
    
    // ...
    func fetchBoxOffice(completion: @escaping (Bool) -> Void) {
        
        // ...
        networkManager.requestData(from: url) { result in
            switch result {
            case .success(let data):
                do {
                    let boxOffice = try JSONDecoder().decode(BoxOffice.self, from: data)
                    self.dailyBoxOffices = DataManager.boxOfficeTransferDailyBoxOfficeData(boxOffice: boxOffice)
                    completion(true)
                } // ...
            }
        }
    }
}
```

#### ğŸ§¯ í•´ê²°ë°©ë²•
í´ë¡œì ¸ì˜ ìº¡ì³ë¡œ `self`ì˜ `RC`ê°€ ì˜¬ë¼ê°€ëŠ” ê²ƒì„ ë§‰ì•„ì£¼ê¸° ìœ„í•´ `[weak self]`ë¡œ í´ë¡œì ¸ë¥¼ ìº¡ì³í•˜ì—¬ ê°•í•œìˆœí™˜ì°¸ì¡°ë¥¼ ì˜ˆë°©í•˜ì˜€ìŠµë‹ˆë‹¤.

```swift
final class BoxOfficeManager {
    private(set) var dailyBoxOffices: [DailyBoxOffice] = []
    
    // ...
    func fetchBoxOffice(completion: @escaping (Bool) -> Void) {
        
        // ...
        networkManager.requestData(from: url) { [weak self] result in
            guard let self else {
                return
            }
                                               
            switch result {
            case .success(let data):
                do {
                    let boxOffice = try JSONDecoder().decode(BoxOffice.self, from: data)
                    self.dailyBoxOffices = DataManager.boxOfficeTransferDailyBoxOfficeData(boxOffice: boxOffice)
                    completion(true)
                } // ...
            }
        }
    }
}
```

<br>

### 3ï¸âƒ£ @escaping (Error?)

#### ğŸ”¥ ë¬¸ì œì 
`Controller`ê°€ `NetworkManager`ë¡œ ì§ì ‘ ë°ì´í„°ë¥¼ ë°›ì•„ì™€ì„œ ê°€ì§€ê³  ìˆëŠ” ê²ƒë³´ë‹¨ `BoxOffice`ì•±ì—ì„œ í•„ìš”í•œ ë°ì´í„°ë¥¼ ë°›ì•„ì˜¤ê³  ê´€ë¦¬í•˜ëŠ” ê°ì²´ê°€ ìˆìœ¼ë©´ ì¢‹ì„ ê²ƒ ê°™ì•„ `BoxOfficeManager` ê°ì²´ë¥¼ ìƒì„±í•˜ì˜€ìŠµë‹ˆë‹¤.
ê·¸ë¦¬ê³  `BoxOfficeManager`ì˜ ë°ì´í„° ë¡œë“œê°€ ì„±ê³µí–ˆì„ë•Œ `UI update`ë¥¼ í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ì½”ë“œë¥¼ êµ¬í˜„í•˜ê¸° ìœ„í•´ `BoxOfficeManager.fetchBoxOffice`ì—ì„œ ì™„ë£Œí•¸ë“¤ëŸ¬ê°€ `Error`ë¥¼ ë˜ì ¸ ì£¼ë„ë¡ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤.
í•˜ì§€ë§Œ `Controller`ê°€ ì–´ë–¤ `Error`ê°€ ë°œìƒí–ˆëŠ”ì§€ ì•Œì•„ì•¼í• ê¹Œë¼ëŠ” ê³ ë¯¼ì´ ìƒê²¼ìŠµë‹ˆë‹¤.

**BoxOffice**
```swift
final class BoxOfficeManager {
    private(set) var dailyBoxOffices: [DailyBoxOffice] = []
    
    // ...
    func fetchBoxOffice(completion: @escaping (Error?) -> Void) {
        // ...
    }
    
    // ...
}
```

**BoxOfficeViewController**
```swift
final class BoxOfficeViewController: UIViewController {
    private let boxOfficeManager = BoxOfficeManager()
    
    // ...
    @objc private func loadBoxOfficeData() {
        boxOfficeManager.fetchBoxOffice { [weak self] error in
            if let error {
                // error ì²˜ë¦¬
                print(error.localizedDescription)
            }
            
            DispatchQueue.main.async {
                // UI ì—…ë°ì´íŠ¸
            }
        }
    }
}
```

- `Controller`ëŠ” `BoxOfficeManager.dailyBoxOffice`ë¡œ ì ‘ê·¼í•˜ì—¬ ë°ì´í„°ë¥¼ ì‚¬ìš©í•˜ê³  `fetchBoxOffice`ê°€ ì™„ë£Œëì„ë•Œ ì—ëŸ¬ë¥¼ ë°˜í™˜í•˜ì§€ ì•Šìœ¼ë©´ `UI update`ë¥¼ í•©ë‹ˆë‹¤.

#### ğŸ§¯ í•´ê²°ë°©ë²•
`fetchBoxOffice`ê°€ ì™„ë£Œëì„ë•Œ `Error`ë¥¼ ë˜ì ¸ëŠ” ê²ƒì´ ì•„ë‹Œ `Bool` íƒ€ì…ì„ ë˜ì ¸ ì„±ê³µ ìœ ë¬´ë§Œ ì•Œ ìˆ˜ ìˆë„ë¡ í•˜ê³  ì–´ë–¤ ì—ëŸ¬ê°€ ë°œìƒí–ˆëŠ”ì§€ëŠ” `Model`ì¸ `BoxOfficeManager`ë§Œ ì•Œ ìˆ˜ ìˆë„ë¡ í•˜ì˜€ìŠµë‹ˆë‹¤.

**BoxOffice**
```swift
final class BoxOfficeManager {
    private(set) var dailyBoxOffices: [DailyBoxOffice] = []
    
    // ...
    func fetchBoxOffice(completion: @escaping (Bool?) -> Void) {
        // ...
    }
    
    // ...
}
```

**BoxOfficeViewController**
```swift
final class BoxOfficeViewController: UIViewController {
    private let boxOfficeManager = BoxOfficeManager()
    
    // ...
    @objc private func loadBoxOfficeData() {
        boxOfficeManager.fetchBoxOffice { [weak self] result in
            if result == false {
                // ì‹¤íŒ¨í–ˆì„ë•Œ ì²˜ë¦¬
            }
            
            DispatchQueue.main.async {
                // UI ì—…ë°ì´íŠ¸
            }
        }
    }
}
```

<br>

### 4ï¸âƒ£ endRefreshing

#### ğŸ”¥ ë¬¸ì œì 
í™”ë©´ì„ ìœ„ë¡œ ë“œë ˆê·¸í•˜ì—¬ ë°ì´í„°ë¥¼ ë¦¬ë¡œë“œí•  ë•Œ ë°ì´í„° ë¡œë“œì— ì‹¤íŒ¨í•˜ë©´ `alert`ì´ ëœ¨ëŠ”ë° ì´ë•Œ `refreshControl?.endRefreshing()`ì´ ì•ˆë˜ëŠ” ë¬¸ì œê°€ ìˆì—ˆìŠµë‹ˆë‹¤.

<Img src = "https://hackmd.io/_uploads/Hyq_Iz9o3.gif" width="300"/>

#### ğŸ§¯ í•´ê²°ë°©ë²•
`endRefreshing`ì˜ ì• ë‹ˆë©”ì´ì…˜ íš¨ê³¼ì™€ `present`ì˜ ì• ë‹ˆë©”ì´ì…˜ íš¨ê³¼ë¥¼ ë™ì‹œì— ì²˜ë¦¬í•˜ì§€ ëª»í•˜ì—¬ ë°œìƒí•˜ëŠ” ì—ëŸ¬ì˜€ìŠµë‹ˆë‹¤.
`present`ì˜ `animated`ë¥¼ `false`ë¡œ ì„¤ì •í•˜ì—¬ í•´ê²°í•˜ì˜€ìŠµë‹ˆë‹¤.

```swift
present(alert, animated: false)
```
<Img src = "https://hackmd.io/_uploads/rkRtvMqi3.gif" width="300"/>

<br>

<a id="7."></a>
## 7. ğŸ”— ì°¸ê³  ë§í¬
- [ğŸApple: Capturing Values](https://docs.swift.org/swift-book/documentation/the-swift-programming-language/closures/#Capturing-Values)
- [ğŸApple: UICollectionView](https://developer.apple.com/documentation/uikit/uicollectionview)
- [ğŸApple: attributedText](https://developer.apple.com/documentation/uikit/uilabel/1620542-attributedtext)
